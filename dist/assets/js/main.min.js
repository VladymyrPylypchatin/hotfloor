"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}var brands={ensto:{id:1,name:"Ensto",country:"Финляндия"},fenix:{id:2,name:"Fenix",country:"Чехия"},nexans:{id:2,name:"Nexans",country:"Норвегия"},devi:{id:2,name:"Devi",country:"Дания"},hemstedt:{id:2,name:"Hemstedt",country:"Германия"},raychem:{id:2,name:"Raychem",country:"Бельгия"},heatplus:{id:2,name:"Heat Plus",country:"Южная Корея"},profitherm:{id:2,name:"Profi Therm",country:"Польша"},interm:{id:2,name:"In-Term",country:"Чехия"},plenka:{id:2,name:"In Therm",country:"Корея"}},types={none:{categoryTittle:"Теплые электрические полы всех видов",description:"Существует 4 основных вида теплого электрического пола. Они отличаются способом и сложностью монтажа, типом напольного покрытия под который они предназначены, ценой и энергоэффективностью. Используйте фильтр, чтобы выбрать конкретный вид теплого пола."},hotmat:{id:1,name:"Нагревательный мат",categoryTittle:"Нагревательные маты под плитку",description:"Нагревательные маты монтируются на чистую стяжку, сверху плиточный клей и плитка. Используются при отсутствии возможности поднимать высоту пола.",powerUnit:"Вт/м<sup>2</sup>",priceUnit:"грн/м<sup>2</sup>"},hotcabel:{id:2,name:"Нагревательный кабель",description:"Нагревательны кабель используется если есть возможность поднять высоту пола на 3 - 7 см цементно-песчаной стяжкой. Сверху выложить кабель и залить стяжкой 3-5 см, уложить плитку на плиточный клей.",categoryTittle:"Нагревательный кабель в стяжку",powerUnit:"Вт/м",priceUnit:"грн/м"},thincabel:{id:3,name:"Тонкий кабель",description:"Тонкий нагревательный кабель под плитку монтируются на чистовую стяжку, сверху плиточный клей и укладывается плитка. Используются если нет возможности или желания поднимать высоту пола.",categoryTittle:"Тонкий нгревательный кабель под плитку",powerUnit:"Вт/м",priceUnit:"грн/м"},plenka:{id:4,name:"Инфракрасная пленка",description:"Инфракрасная пленка монтируется под сухие напольные покрытия, такие как: ламинат, линолеум, паркет. Экономичный и эффективный вид отопления помещения. Главные преимущества: быстрый монтаж и низкая цена.",categoryTittle:"Инфракрасная пленка под ламинат",powerUnit:"Вт",priceUnit:"грн/м"}},Product=function(){function t(e,n,s,o,i){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:n.name;_classCallCheck(this,t),this.id=e,this.brand=n,this.type=s,this.price=o,this.power=i,this.name=r,this.card=null}return _createClass(t,[{key:"createCard",value:function(){return this.card=$("<div></div>"),this.card.addClass("col-xl-3 col-lg-3 col-md-6 col-sm-6 col-6 itemWrap"),this.card.append('\n            <div class="item">\n                <div class="wrapImg">\n                    <img src="assets/img/products/'.concat(this.id,'.webp" alt="">\n                </div>\n                <div class="discription">\n                    <p class="itemTitle">').concat(this.name,'</p>\n                    <p class="country">').concat(this.brand.country,'</p>\n                    <p class="discr">').concat(this.type.name,"<br>").concat(this.power," ").concat(this.type.powerUnit,'</p>\n                    <p class="cena">от<span> ').concat(this.price," </span>").concat(this.type.priceUnit,'</p>\n                    <button data-product-id="').concat(this.id,'">ПОДРОБНЕЕ</button>\n                </div>\n            </div>\n        ')),this.card.find("button").bind("click",this.openPopup.bind(this)),this.card.find("button").bind("click",this.analyticsEvent.bind(this)),this.card}},{key:"openPopup",value:function(){$(".popup").css({opacity:"1","pointer-events":"auto"});var t=this.type.name+" "+this.brand.name+". Получить консультацию";$(".popup__titleForm").text(t)}},{key:"analyticsEvent",value:function(){dataLayer.push({event:"ProductMore",info:this.type.name+" "+this.brand.name})}}]),t}(),ProductList=function(){function t(){_classCallCheck(this,t),this.list=[new Product(8,brands.interm,types.hotmat,664,150),new Product(1,brands.ensto,types.hotcabel,78,20),new Product(12,brands.fenix,types.hotmat,943,160),new Product(11,brands.nexans,types.hotmat,1162,150),new Product(5,brands.interm,types.hotcabel,49,20),new Product(2,brands.hemstedt,types.hotcabel,61,17),new Product(9,brands.hemstedt,types.hotmat,1087,150),new Product(17,brands.raychem,types.thincabel,547,10,"Raychem cera"),new Product(3,brands.devi,types.hotcabel,162,18),new Product(13,brands.raychem,types.hotmat,1378,150),new Product(4,brands.fenix,types.hotcabel,52,18),new Product(20,brands.plenka,types.plenka,356,180,"Heat Plus Aph"),new Product(6,brands.profitherm,types.hotcabel,56,19),new Product(7,brands.raychem,types.hotcabel,71,17),new Product(16,brands.fenix,types.thincabel,279,10,"Fenix ADSV 10"),new Product(18,brands.plenka,types.plenka,115,220,"In Therm"),new Product(10,brands.devi,types.hotmat,1360,150),new Product(14,brands.hemstedt,types.thincabel,547,12),new Product(15,brands.devi,types.thincabel,378,10),new Product(19,brands.plenka,types.plenka,350,220,"Heat Plus")],this.sort=types.none,this.sortedList=this.list,this.minVisibleProducts=this.sortedList.length<8?this.sortedList.length:8,this.visibleProducts=this.minVisibleProducts,this.productsContainer=$(".topSales .row__items"),this.productsElems=this.productsContainer.find(".itemWrap"),this.showMoreButton=$(".topSales .btn-showmore"),this.showMoreButton.bind("click",this.showMore.bind(this)),this.sortsButtons=$(".topSales .sort-buttons button"),this.sortsButtons.bind("click",this.changeCat.bind(this)),this.sortsButtons.bind("click",function(){dataLayer.push({event:"changeCategory"})}),this.sectionTitle=$(".topSales h2"),this.typeDescription=$(".topSales .sort-description"),this.setActiveCat()}return _createClass(t,[{key:"changeCat",value:function(t){var e=t.target.getAttribute("data-sort-type");this.sortProducts(e),this.activateButton(t.target),this.refreshTitle(),this.refreshDescription()}},{key:"setActiveCat",value:function(){var t=document.querySelector(".topSales .sort-buttons button.active");if(t){var e=t.getAttribute("data-sort-type");this.sortProducts(e),this.refreshTitle(),this.refreshDescription()}}},{key:"sortProducts",value:function(t){if(console.log(t),console.log(this.sort),types[t]==this.sort)this.sortedList=this.list,this.sort=types.none;else{this.sort=types[t],this.sortedList=[];for(var e=0;e<this.list.length;e++)this.list[e].type.id==this.sort.id&&(console.log(1),this.sortedList.push(this.list[e]))}console.dir(this.sortedList),this.maxDisplayProductsCheck(),this.switchButton(),this.printProducts()}},{key:"activateButton",value:function(t){console.dir(t),t.classList.contains("active")?t.classList.remove("active"):(this.sortsButtons.removeClass("active"),t.classList.add("active"))}},{key:"printProducts",value:function(){this.productsContainer.find(".itemWrap").remove();for(var t=0;t<this.visibleProducts;t++){var e=this.sortedList[t].createCard();this.productsContainer.append(e)}}},{key:"showMore",value:function(){this.visibleProducts+4<=this.sortedList.length?this.visibleProducts+=4:(this.visibleProducts=this.sortedList.length,this.switchButton()),this.printProducts()}},{key:"showLess",value:function(){this.productsContainer.find(".itemWrap").remove(),this.visibleProducts=this.minVisibleProducts,this.switchButton(),this.printProducts()}},{key:"switchButton",value:function(){"more"==this.showMoreButton.attr("data-action")?(console.log(1),this.showMoreButton.unbind("click"),this.showMoreButton.bind("click",this.showLess.bind(this)),this.showMoreButton.html("Спрятать"),this.showMoreButton.attr("data-action","less")):"less"==this.showMoreButton.attr("data-action")&&(this.showMoreButton.unbind("click"),this.showMoreButton.bind("click",this.showMore.bind(this)),this.showMoreButton.html("Показать больше"),this.showMoreButton.attr("data-action","more"))}},{key:"maxDisplayProductsCheck",value:function(){this.minVisibleProducts=this.sortedList.length<8?this.sortedList.length:8,this.visibleProducts=this.minVisibleProducts,this.sortedList.length<=8?this.showMoreButton.hide(300):this.showMoreButton.show()}},{key:"refreshTitle",value:function(){null==this.sort?this.sectionTitle.html("Теплые электрические полы всех видов"):this.sectionTitle.html(this.sort.categoryTittle)}},{key:"refreshDescription",value:function(){this.typeDescription.html(this.sort.description)}}]),t}();$(document).ready(function(){(new ProductList).printProducts()}),function(t){function e(){var t=!1;if(window.XMLHttpRequest)t=new XMLHttpRequest;else if(window.ActiveXObject)try{t=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){t=new ActiveXObject("Msxml2.XMLHTTP")}return t||alert("Request Error"),t}function n(t,n,s,o){var i=e();i&&(i.onreadystatechange=function(){4==i.readyState&&o(i)},"get"==t.toLowerCase()&&s.length>0&&(n+="?"+s),i.open(t,n,!0),"post"==t.toLowerCase()?(i.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8"),i.send(s)):i.send(null))}function s(t){var e={};return e.name=t.find("input[name=name]").val(),e.email=t.find("input[name=email]").val(),e.phone=t.find("input[name=phone]").val(),e.capacity=t.find("input[name=capacity]").val(),e}var o=function(t){t.responseText;console.log("success")};t(document).ready(function(){function e(){r++,r%2!=0?(t(".burger__center").css({opacity:"0"}),t(".burger__top").css({transform:"rotateZ(45deg) translateY(9px) translateX(11px)"}),t(".burger__bottom").css({transform:"rotateZ(-45deg) translateY(-6.5px) translateX(8.5px)"}),t(".header__mob_menu").css({transform:"translateX(0px)"})):(t(".burger__center").css({opacity:"1"}),t(".burger__top").css({transform:"rotateZ(0deg)"}),t(".burger__bottom").css({transform:"rotateZ(0deg)"}),t(".header__mob_menu").css({transform:"translateX(-252px)"}))}t("input[type=tel]").mask("+38 (000) 000-00-00");t(".lead-form").on("submit",function(e){e.preventDefault();var n=t(this).attr("data-form-name");t(this).attr("data-purpose");fbq("track","Lead"),dataLayer.push({event:"send_form",formName:n})});var i=[];t(".lead-form input").on("focus",function(e){var n=t(this).parents("form").attr("data-form-name");i.find(function(t){return t==n})||(dataLayer.push({event:"fromInteraction",formName:n}),i.push(n))}),t(".testimonials-carousel").owlCarousel({items:1,loop:!0,margin:30}),t(".projects-carousel").owlCarousel({items:3,loop:!0,margin:30,nav:!0,navText:["<img src='assets/img/left-arrow.svg'>","<img src='assets/img/right-arrow.svg'>"],responsive:{0:{nav:!1,items:1,slideBy:1,dotsEach:1,margin:15},580:{items:2,slideBy:2,dotsEach:2,margin:15},768:{items:3,slideBy:3,dotsEach:3}}}),t(".otzivi").on("click",function(){var e=t(".screen-testimonials").offset().top;t("body,html").animate({scrollTop:e},700)}),t(".projects").on("click",function(){var e=t(".screen-projects").offset().top;t("body,html").animate({scrollTop:e},700)}),t(".assortyment").on("click",function(){var e=t(".screen2").offset().top;t("body,html").animate({scrollTop:e},500)}),t(".oNas").on("click",function(){var e=t(".pochemu").offset().top;t("body,html").animate({scrollTop:e},600)}),t(".stoimost").on("click",function(){var e=t(".screen5").offset().top;t("body,html").animate({scrollTop:e},700)}),t(".sertifikaty").on("click",function(){var e=t(".screen4").offset().top;t("body,html").animate({scrollTop:e},800)}),t(".contacts").on("click",function(){var e=t("footer").offset().top;t("body,html").animate({scrollTop:e},900)}),t(".cnopa").on("click",function(){t("body,html").animate({scrollTop:0},900)}),t(".burger").on("click",function(){e()});var r=0;t(".open_popup").on("click",function(){t(".popup").css({opacity:"1","pointer-events":"auto"});var e=t(this).attr("data-text");t(".popup__titleForm").text(e)}),t(".PopupClosed").on("click",function(){t(".popup").css({opacity:"0","pointer-events":"none"}),setTimeout(function(){t(".name, .phone, .mail").val("")},1050)}),t(".header__mob_menu li").on("click",function(){r++,t(".header__mob_menu").css({transform:"translateX(-252px)"}),t(".burger__top").css({transform:"rotateZ(0deg)"}),t(".burger__bottom").css({transform:"rotateZ(0deg)"}),t(".burger__center").css({opacity:"1"})}),t(".send").on("submit",function(){var e=t(".name").val().length,i=t(".phone").val().length,r=t(".mail").val().length;console.log(e),console.log(i),console.log(r);var a=1,c=1,l=1;if(e>=2?a=1:(t(".name").css({border:"3px solid red"}),setTimeout(function(){t(".name").css({border:"none"})},1e3)),19==i?c=1:(t(".phone").css({border:"3px solid red"}),setTimeout(function(){t(".phone").css({border:"none"})},1e3)),r>=5?l=1:(t(".mail").css({border:"3px solid red"}),setTimeout(function(){t(".mail").css({border:"none"})},1e3)),1==a&&1==c&&1==l){var u=JSON.stringify(s(t(this)));console.log(u),n("POST","mailer.php","data="+u,o),t(".name, .phone, .mail").css({opacity:"0",transition:"1s"}),setTimeout(function(){t(".name, .phone, .PopupClosed, .popupBat, .mail").css({display:"none"}),t(".popup__titleForm").text("Спасибо, мы Вам позвоним в ближайшее время.")},1e3),setTimeout(function(){t(".popup").css({opacity:"0","pointer-events":"none"}),setTimeout(function(){t(".name, .phone, .mail, .send").css({display:"block",opacity:"1"}),t(".PopupClosed, .popupBat").css({display:"flex",opacity:"1"}),t(".name, .phone, .mail").val("")},1e3)},5e3)}}),t(".send2").on("submit",function(){console.log("da");var e=1,i=1,r=1;if(t(".name2").each(function(n,s){if(t(s).val().length>=2)return e=1,void console.log(e);t(this).css({border:"3px solid red"}),setTimeout(function(){t(".name2").css({border:"none"})},1e3)}),t(".phone2").each(function(e,n){if(19==t(n).val().length)return i=1,void console.log(i);t(this).css({border:"3px solid red"}),setTimeout(function(){t(".phone2").css({border:"none"})},1e3)}),t(".mail2").each(function(e,n){if(t(n).val().length>=5)return r=1,void console.log(r);t(this).css({border:"3px solid red"}),setTimeout(function(){t(".mail2").css({border:"none"})},1e3)}),1==e&&1==i&&1==r){var a=JSON.stringify(s(t(this)));console.log(a),n("POST","mailer.php","data="+a,o),t(".popup_goodbye").css({opacity:"1","pointer-events":"auto"}),setTimeout(function(){t(".popup_goodbye").css({opacity:"0","pointer-events":"none"}),t(".name2, .phone2, .mail2").val("")},4e3)}})})}(jQuery);