(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{3048:function(e,t){},3049:function(e,t){},3078:function(e,t,n){var r={"./af":961,"./af.js":961,"./ar":960,"./ar-dz":959,"./ar-dz.js":959,"./ar-kw":958,"./ar-kw.js":958,"./ar-ly":957,"./ar-ly.js":957,"./ar-ma":956,"./ar-ma.js":956,"./ar-sa":955,"./ar-sa.js":955,"./ar-tn":954,"./ar-tn.js":954,"./ar.js":960,"./az":953,"./az.js":953,"./be":952,"./be.js":952,"./bg":951,"./bg.js":951,"./bm":950,"./bm.js":950,"./bn":949,"./bn.js":949,"./bo":948,"./bo.js":948,"./br":947,"./br.js":947,"./bs":946,"./bs.js":946,"./ca":945,"./ca.js":945,"./cs":944,"./cs.js":944,"./cv":943,"./cv.js":943,"./cy":942,"./cy.js":942,"./da":941,"./da.js":941,"./de":940,"./de-at":939,"./de-at.js":939,"./de-ch":938,"./de-ch.js":938,"./de.js":940,"./dv":937,"./dv.js":937,"./el":936,"./el.js":936,"./en-au":935,"./en-au.js":935,"./en-ca":934,"./en-ca.js":934,"./en-gb":933,"./en-gb.js":933,"./en-ie":932,"./en-ie.js":932,"./en-il":931,"./en-il.js":931,"./en-nz":930,"./en-nz.js":930,"./eo":929,"./eo.js":929,"./es":928,"./es-do":927,"./es-do.js":927,"./es-us":926,"./es-us.js":926,"./es.js":928,"./et":925,"./et.js":925,"./eu":924,"./eu.js":924,"./fa":923,"./fa.js":923,"./fi":922,"./fi.js":922,"./fo":921,"./fo.js":921,"./fr":920,"./fr-ca":919,"./fr-ca.js":919,"./fr-ch":918,"./fr-ch.js":918,"./fr.js":920,"./fy":917,"./fy.js":917,"./gd":916,"./gd.js":916,"./gl":915,"./gl.js":915,"./gom-latn":914,"./gom-latn.js":914,"./gu":913,"./gu.js":913,"./he":912,"./he.js":912,"./hi":911,"./hi.js":911,"./hr":910,"./hr.js":910,"./hu":909,"./hu.js":909,"./hy-am":908,"./hy-am.js":908,"./id":907,"./id.js":907,"./is":906,"./is.js":906,"./it":905,"./it.js":905,"./ja":904,"./ja.js":904,"./jv":903,"./jv.js":903,"./ka":902,"./ka.js":902,"./kk":901,"./kk.js":901,"./km":900,"./km.js":900,"./kn":899,"./kn.js":899,"./ko":898,"./ko.js":898,"./ky":897,"./ky.js":897,"./lb":896,"./lb.js":896,"./lo":895,"./lo.js":895,"./lt":894,"./lt.js":894,"./lv":893,"./lv.js":893,"./me":892,"./me.js":892,"./mi":891,"./mi.js":891,"./mk":890,"./mk.js":890,"./ml":889,"./ml.js":889,"./mn":888,"./mn.js":888,"./mr":887,"./mr.js":887,"./ms":886,"./ms-my":885,"./ms-my.js":885,"./ms.js":886,"./mt":884,"./mt.js":884,"./my":883,"./my.js":883,"./nb":882,"./nb.js":882,"./ne":881,"./ne.js":881,"./nl":880,"./nl-be":879,"./nl-be.js":879,"./nl.js":880,"./nn":878,"./nn.js":878,"./pa-in":877,"./pa-in.js":877,"./pl":876,"./pl.js":876,"./pt":875,"./pt-br":874,"./pt-br.js":874,"./pt.js":875,"./ro":873,"./ro.js":873,"./ru":872,"./ru.js":872,"./sd":871,"./sd.js":871,"./se":870,"./se.js":870,"./si":869,"./si.js":869,"./sk":868,"./sk.js":868,"./sl":867,"./sl.js":867,"./sq":866,"./sq.js":866,"./sr":865,"./sr-cyrl":864,"./sr-cyrl.js":864,"./sr.js":865,"./ss":863,"./ss.js":863,"./sv":862,"./sv.js":862,"./sw":861,"./sw.js":861,"./ta":860,"./ta.js":860,"./te":859,"./te.js":859,"./tet":858,"./tet.js":858,"./tg":857,"./tg.js":857,"./th":856,"./th.js":856,"./tl-ph":855,"./tl-ph.js":855,"./tlh":854,"./tlh.js":854,"./tr":853,"./tr.js":853,"./tzl":852,"./tzl.js":852,"./tzm":851,"./tzm-latn":850,"./tzm-latn.js":850,"./tzm.js":851,"./ug-cn":849,"./ug-cn.js":849,"./uk":848,"./uk.js":848,"./ur":847,"./ur.js":847,"./uz":846,"./uz-latn":845,"./uz-latn.js":845,"./uz.js":846,"./vi":844,"./vi.js":844,"./x-pseudo":843,"./x-pseudo.js":843,"./yo":842,"./yo.js":842,"./zh-cn":841,"./zh-cn.js":841,"./zh-hk":840,"./zh-hk.js":840,"./zh-tw":839,"./zh-tw.js":839};function o(e){var t=i(e);return n(t)}function i(e){var t=r[e];if(!(t+1)){var n=new Error('Cannot find module "'+e+'".');throw n.code="MODULE_NOT_FOUND",n}return t}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=3078},3079:function(e,t,n){"use strict";(function(e){var r=n(30),o=n(110);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=Object(r.b)().objectPersistence,d=function(t){function n(){var e,t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=c(this,(e=s(n)).call.apply(e,[this].concat(o)))).currentUserId=void 0,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(n,o["a"]),function(e,t,n){t&&u(e.prototype,t),n&&u(e,n)}(n,[{key:"storeOpts",value:function(e){return f.setItem("".concat(this.currentUserId,"_ionOpts"),e)}},{key:"init",value:function(){var t=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function u(e){a(i,r,o,u,c,"next",e)}function c(e){a(i,r,o,u,c,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.getItem("".concat(this.currentUserId,"_ionOpts"));case 2:n=t.sent,this._values=n,"object"===(void 0===e?"undefined":i(e))&&(e.__ionOpts=this._values);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}]),n}();t.a=new d}).call(this,n(11))},3084:function(e,t,n){"use strict";(function(e){var r=n(510),o=n.n(r),i=n(365),a=n(640),u=n(58),c=n(110);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),d(this,p(n).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(n,c["a"]),function(e,t,n){t&&f(e.prototype,t),n&&f(e,n)}(n,[{key:"getIonOptsUrl",value:function(){return"".concat(u.a.getBaseUrlWithPathPrefix(),"IonOpts.action")}},{key:"init",value:function(){var t=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){l(i,r,o,a,u,"next",e)}function u(e){l(i,r,o,a,u,"throw",e)}a(void 0)})}}(regeneratorRuntime.mark(function t(){var n,r=this,u=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=u.length>0&&void 0!==u[0]&&u[0],this._values={},t.abrupt("return",new Promise(function(t,u){o.a.get(r.getIonOptsUrl()).set(Object(i.a)()?{Cookie:"auth=".concat(Object(i.a)())}:{}).withCredentials().end(function(o,c){return o?(n&&Object(i.d)(),u(o)):Object(a.b)({statusCode:c.status})?u(o):(r._values=c.body||{},"object"===(void 0===e?"undefined":s(e))&&(e.__ionOpts=r._values),void t())})}));case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}]),n}();t.a=new h}).call(this,n(11))},3117:function(e,t,n){"use strict";function r(e){if(!e)return null;var t=e;return(t.length<4||"http"!==t.substr(0,4))&&(t="localhost"===t.substr(0,9)?"http://".concat(t):"https://".concat(t)),t}n.d(t,"a",function(){return r})},3119:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t);var o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){r(e,t,n[t])})}return e}({},n(981).default,{isNode:!1});t.default=o},365:function(e,t,n){"use strict";n.d(t,"d",function(){return m}),n.d(t,"e",function(){return b}),n.d(t,"a",function(){return g}),n.d(t,"b",function(){return y}),n.d(t,"c",function(){return E});var r=n(440),o=n(968),i=n.n(o),a=n(61),u=n(30),c=n(372),s=n(558),l=n(378),f=n(556);n(60);function d(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function p(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){d(i,r,o,a,u,"next",e)}function u(e){d(i,r,o,a,u,"throw",e)}a(void 0)})}}var v,h=r.a.platformName,m=function(){var e=p(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(u.b)().triggerLogin());case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),b=function(){var e=p(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(u.b)().triggerLogout(t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),g=function(){return null!=v?v:v=""},y=function(){var e=p(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("web"!==h){e.next=2;break}return e.abrupt("return",null);case 2:return e.abrupt("return",a.a.call("app.actions.getCurrentUserBizAuth"));case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),E=function(){return c.a.isDev()?i.a.get("auth")||"":g()};a.a.subscribe("user.access.unauthorized",function(){Object(l.d)()?Object(f.b)(function(){},function(){Object(s.a)()?(Object(s.d)(),window.location.reload()):Object(l.e)()&&b()}):b()})},367:function(e,t,n){"use strict";var r=n(22),o=n(61),i=n(56),a=n.n(i),u=n(369),c=n(378),s=n(365),l=n(381);function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){d(e,t,n[t])})}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function h(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){v(i,r,o,a,u,"next",e)}function u(e){v(i,r,o,a,u,"throw",e)}a(void 0)})}}var m=Object(r.default)("ion:ShardLocator"),b=1,g=2,y=3,E=99,S=0,_=-1,k=1,w=u.SharedNotebookPrivilegeLevel.BUSINESS_FULL_ACCESS,N=u.SharedNotebookPrivilegeLevel.FULL_ACCESS,O=u.SharedNotebookPrivilegeLevel.MODIFY_NOTEBOOK_PLUS_ACTIVITY,I=u.SharedNotebookPrivilegeLevel.READ_NOTEBOOK_PLUS_ACTIVITY,T=u.SharedNotebookPrivilegeLevel.READ_NOTEBOOK,L=u.SharedNotePrivilegeLevel.FULL_ACCESS,A=u.SharedNotePrivilegeLevel.MODIFY_NOTE,R=u.SharedNotePrivilegeLevel.READ_NOTE,C=function(e,t){return t?function(e,t){return null==e&&null==t?S:null==e?_:null==t?k:e===t?S:-1===e?_:e===w?k:e===N?t===w?_:k:e===O?t===w||t===N?_:k:e===I?t===w||t===N||t===O?_:k:e===T?_:(m.error("No valid comparison between notebook privs"),S)}(e.privilege,t.privilege)===k?e:t:e},P=function(e,t){return t?function(e,t){return null==e&&null==t?S:null==e?_:null==t?k:e===t?S:-1===e?_:e===L?k:e===A?t===L?_:k:e===R?_:(m.error("No valid comparison between note privs"),S)}(e.privilege,t.privilege)===k?e:t:e};function j(e){return x.apply(this,arguments)}function x(){return(x=h(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,o.a.call("workspace.actions.getworkspaceresponse",t);case 4:if(null!=(n=e.sent).workspace){e.next=7;break}return e.abrupt("return",null);case 7:return e.abrupt("return",f({},n.workspace,{memberships:n.memberships}));case 8:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var U=function(){function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.personal=void 0,this.shard=void 0,this.sharedToMe=void 0,this.authenticationToken=void 0,this.globalId=void 0,this.personal=t,this.shard=r||null,this.sharedToMe=n||!1,this.authenticationToken=o||null}return function(e,t,n){t&&p(e.prototype,t),n&&p(e,n)}(e,null,[{key:"newInstance",value:function(t){return new e(t.personal,t.sharedToMe,t.shard,t.authenticationToken)}},{key:"newPersonalLocator",value:function(t,n,r){return new e(!0,t,n,r)}},{key:"newBusinessLocator",value:function(t,n,r){return new e(!1,t,n,r)}},{key:"newDefaultLocator",value:function(t,n,r){return new e(!Object(c.d)(),t,n,r)}},{key:"getDefaultShard",value:function(){var e=h(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(c.d)()){e.next=6;break}return e.next=3,o.a.call("business.getshard");case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,o.a.call("personal.getshard");case 8:e.t0=e.sent;case 9:return e.abrupt("return",e.t0);case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getBusinessLocator",value:function(){var t=h(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.call("business.getshard");case 2:return n=t.sent,t.t0=e,t.t1=n,t.next=7,Object(s.b)();case 7:return t.t2=t.sent,t.abrupt("return",t.t0.newBusinessLocator.call(t.t0,!1,t.t1,t.t2));case 9:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"getPersonalLocator",value:function(){var t=h(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.call("personal.getshard");case 2:return n=t.sent,t.abrupt("return",e.newPersonalLocator(!1,n));case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"getDefaultLocator",value:function(){var e=h(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(c.d)(),e.next=3,t?this.getBusinessLocator():this.getPersonalLocator();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getNotebookAuthToken",value:function(){var e=h(regeneratorRuntime.mark(function e(t,n,r,i,a){var u,c,s,f,d,p,v,h,m,b,g,y,E,S,_;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,u=l.G,c=l.B,s=l.m,f=l.o,d=l.b,e.t1=n,!e.t1){e.next=11;break}return e.t2=s,e.t3=t,e.t4=n,e.next=9,o.a.call("identity.actions.getidentities");case 9:e.t5=e.sent,e.t1=(0,e.t2)(e.t3,e.t4,null,e.t5);case 11:if(e.t0=e.t1,e.t0){e.next=14;break}e.t0=null;case 14:if(p=e.t0,v=r&&f(t,r)||null,h=p&&c[p]?c[p]:d,m=v&&u[v]?u[v]:d,b=n.guid,g=null!=i&&i.shardId,y=null!=a&&a.shardId,E=g||y||null,S=!r||h>m,_=null==i||i.senderId!==t.id,!(E&&b&&S&&_)||n.isTrueOwner){e.next=28;break}return e.next=27,o.a.call("notebook.actions.authenticateToSharedNotebook",{notebookIdentifier:b,shardId:E});case 27:return e.abrupt("return",e.sent);case 28:return e.abrupt("return",null);case 31:return e.prev=31,e.t6=e.catch(0),e.abrupt("return",null);case 34:case"end":return e.stop()}},e,this,[[0,31]])}));return function(t,n,r,o,i){return e.apply(this,arguments)}}()},{key:"actuallyGetLocationForLinkedNotebookGuid",value:function(){var t=h(regeneratorRuntime.mark(function t(n){var r,i,a,u,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.lnbGuid,t.next=3,o.a.call("linkednotebook.actions.getByGuid",r);case 3:if(null!=(i=t.sent)){t.next=6;break}throw new Error("No LinkedNotebook with that guid");case 6:if(a=i.shardId,u=i.sharedNotebookGlobalId,null!=a&&null!=u){t.next=9;break}throw new Error("cannot determine location of linked notebook");case 9:return(c=e.newPersonalLocator(!0,a,null)).globalId=u,t.next=13,o.a.call("notebook.actions.authenticateToSharedNotebook",{notebookIdentifier:u,shardId:a});case 13:return c.authenticationToken=t.sent,t.abrupt("return",c);case 15:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getLocationForLinkedNotebookGuid",value:function(){var t=h(regeneratorRuntime.mark(function t(n,r){var i,a,u,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.call("linkednotebook.actions.getlinkednotebook",n||"");case 2:if(i=t.sent){t.next=5;break}throw new Error("no linked notebook can be found");case 5:if(a=r||i.shardId,u=i.sharedNotebookGlobalId,a&&u){t.next=9;break}throw new Error("cannot determine location of linked notebook");case 9:return(c=e.newPersonalLocator(!0,a,null)).globalId=i.sharedNotebookGlobalId,t.next=13,o.a.call("notebook.actions.authenticateToSharedNotebook",{notebookIdentifier:u,shardId:a});case 13:return c.authenticationToken=t.sent,t.abrupt("return",c);case 15:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"getLocationForNotebookGuid",value:function(){var t=h(regeneratorRuntime.mark(function t(n){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=n){t.next=2;break}return t.abrupt("return",e.getDefaultLocator());case 2:return t.prev=2,t.next=5,o.a.call("notebook.actions.getnotebook",n);case 5:return r=t.sent,n&&!r.guid&&(r.guid=n),t.next=9,e.getLocationForNotebook(r);case 9:return t.abrupt("return",t.sent);case 12:return t.prev=12,t.t0=t.catch(2),t.abrupt("return",e.getLocationForNotebook({guid:n}));case 15:case"end":return t.stop()}},t,this,[[2,12]])}));return function(e){return t.apply(this,arguments)}}()},{key:"getLocationForNoteGuid",value:function(){var t=h(regeneratorRuntime.mark(function t(n){var r,i,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.call("note.datasource.getnote",n);case 2:return r=t.sent,i=r||new u.Note({guid:n}),t.next=6,e.getLocationForNote(i);case 6:return a=t.sent,t.abrupt("return",a);case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getLocationForNotebook",value:function(){var t=h(regeneratorRuntime.mark(function t(n){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getExtraDataForNotebook(n);case 2:return r=t.sent,t.next=5,e.determineLocationForNotebook(f({notebook:n},r));case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getLocationForNote",value:function(t){return new Promise(function(n){e.getExtraDataForNote(t).then(function(r){n(e.determineLocationForNote(f({note:t},r)))})})}},{key:"getExtraDataForNote",value:function(){var e=h(regeneratorRuntime.mark(function e(t){var n,r,i,a,u,s,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.call("user.actions.getactiveuser");case 3:if(n=e.sent){e.next=6;break}throw new Error("no user???");case 6:if(!Object(c.d)()){e.next=12;break}return e.next=9,o.a.call("user.actions.getvaultuserid");case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:return r=e.t0,e.next=16,this.getDefaultShard();case 16:return i=e.sent,e.next=19,o.a.call("identity.actions.getidentitiesforuser",n.id);case 19:return a=e.sent,u=a.map(function(e){return e.id}),s=function(){var e=h(regeneratorRuntime.mark(function e(a){var c,s,l,f,d,p,v,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.call("attachments.actions.getattachment",t.notebookGuid);case 3:return c=e.sent,e.next=6,o.a.call("linkednotebook.actions.getlinkednotebook",t.notebookGuid||"");case 6:return s=e.sent,l=null!=c&&c.shardId,f=null!=s&&s.shardId,d=l||f||null,e.next=12,o.a.call("attachments.actions.getattachment",t.guid);case 12:if(p=e.sent,v=p&&p.shardId||d||null,null!=a&&null!=a.workspaceGuid){e.next=18;break}e.t0=null,e.next=21;break;case 18:return e.next=20,j(a.workspaceGuid);case 20:e.t0=e.sent;case 21:return h=e.t0,e.abrupt("return",{authenticationToken:null,currentShard:i,identityIds:u,linkedNotebook:s,noteShard:v,notebook:a,notebookAttachment:c,notebookShard:d,user:n,vaultUserId:r,workspace:h});case 25:throw e.prev=25,e.t1=e.catch(0),e.t1;case 28:case"end":return e.stop()}},e,this,[[0,25]])}));return function(t){return e.apply(this,arguments)}}(),e.prev=22,e.next=25,o.a.call("notebook.actions.getnotebook",t.notebookGuid);case 25:return l=e.sent,e.next=28,s(l);case 28:return e.abrupt("return",e.sent);case 31:return e.prev=31,e.t1=e.catch(22),e.next=35,s(null);case 35:return e.abrupt("return",e.sent);case 36:e.next=41;break;case 38:throw e.prev=38,e.t2=e.catch(0),e.t2;case 41:case"end":return e.stop()}},e,this,[[0,38],[22,31]])}));return function(t){return e.apply(this,arguments)}}()},{key:"determineLocationForNotebook",value:function(){var t=h(regeneratorRuntime.mark(function t(n){var r,o,i,a,u,f,d,p,v,h,m,b,g,y;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.authenticationToken,o=n.notebook,i=n.user,a=n.vaultUserId,u=n.notebookAttachment,f=n.currentShard,d=n.workspace,p=l.n(i,o),v=d&&l.E(i,d),t.t0=e,t.t1=f,t.t2=r,t.t2){t.next=10;break}return t.next=9,Object(s.b)();case 9:t.t2=t.sent;case 10:if(t.t3=t.t2,h=t.t0.newBusinessLocator.call(t.t0,!0,t.t1,t.t3),m=e.newPersonalLocator(!1,f,r),b=u&&u.shardId||null,g=e.newPersonalLocator(!0,b,r),-1===p){t.next=17;break}return t.abrupt("return",Object(c.d)()?h:m);case 17:if(y=e.getHighestPrivilegeShareForNotebook(o,d,i),!Object(c.d)()||!(null!=y.ownerId&&y.ownerId===a||null!=y.sharedFrom&&y.sharedFrom===a)){t.next=20;break}return t.abrupt("return",h);case 20:if(!(u&&u.external&&u.guid)){t.next=22;break}return t.abrupt("return",this.getLocationForLinkedNotebookGuid(u.guid,u.shardId));case 22:if(!o.shardIdFromSharedAuth){t.next=24;break}return t.abrupt("return",this.getLocationForLinkedNotebookGuid(o.guid,o.shardIdFromSharedAuth));case 24:if(y.type!==E&&!v){t.next=26;break}return t.abrupt("return",Object(c.d)()?h:m);case 26:return t.abrupt("return",g);case 27:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getExtraDataForNotebook",value:function(){var e=h(regeneratorRuntime.mark(function e(t){var n,r,i,a,u,s,l,f,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.call("user.actions.getactiveuser");case 3:if(n=e.sent){e.next=6;break}throw new Error("no user???");case 6:if(!Object(c.d)()){e.next=12;break}return e.next=9,o.a.call("user.actions.getvaultuserid");case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:return r=e.t0,e.next=16,this.getDefaultShard();case 16:return i=e.sent,e.next=19,o.a.call("identity.actions.getidentitiesforuser",n.id);case 19:return a=e.sent,u=a.map(function(e){return e.id}),e.next=23,o.a.call("attachments.actions.getattachment",t.guid);case 23:return s=e.sent,e.next=26,o.a.call("linkednotebook.actions.getlinkednotebook",t.guid);case 26:if(l=e.sent,null!=t.workspaceGuid){e.next=31;break}e.t1=null,e.next=34;break;case 31:return e.next=33,j(t.workspaceGuid);case 33:e.t1=e.sent;case 34:return f=e.t1,e.next=37,this.getNotebookAuthToken(n,t,f,s,l);case 37:return d=e.sent,e.abrupt("return",{authenticationToken:d,user:n,vaultUserId:r,notebookAttachment:s,currentShard:i,identityIds:u,workspace:f});case 41:throw e.prev=41,e.t2=e.catch(0),e.t2;case 44:case"end":return e.stop()}},e,this,[[0,41]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getHighestPrivilegeShareForNotebook",value:function(t,n,r){var o=l.G,i=l.B,a=l.b,c=g,s=y,f=E,d={sharedFrom:null,type:null,ownerId:null},p=e.getOwnMembership(n,r),v=e.getSharesToSelfForNotebook(t,r),h=v.length>0?v.reduce(C):new u.SharedNotebook({privilege:a}),m=h.privilege,b=m&&i[m]||a,S=p&&p.privilege&&o[p.privilege]||a;return S!==a&&S>=b?d.type=s:b!==a?(d.type=c,d.sharedFrom=h.sharerUserId,d.ownerId=h.userId):d.type=f,d}},{key:"determineLocationForNote",value:function(){var t=h(regeneratorRuntime.mark(function t(n){var r,o,i,a,u,f,d,p,v,h,m,S,_,k,w;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.authenticationToken,o=n.currentShard,i=n.identityIds,a=n.linkedNotebook,u=n.note,f=n.noteShard,d=n.notebook,p=n.notebookAttachment,v=n.notebookShard,h=n.user,m=n.vaultUserId,S=n.workspace,-1===l.n(h,d)){t.next=12;break}if(t.t0=e,t.t1=o,t.t2=r,t.t2){t.next=10;break}return t.next=9,Object(s.b)();case 9:t.t2=t.sent;case 10:return t.t3=t.t2,t.abrupt("return",t.t0.newBusinessLocator.call(t.t0,!0,t.t1,t.t3));case 12:if(_=e.getHighestPrivilegeShareForNote(u,h,d,S,i),k=_.type===y,!Object(c.d)()||!(null!=_.ownerId&&_.ownerId===m||null!=_.sharedFrom&&_.sharedFrom===m)){t.next=24;break}if(t.t4=e,t.t5=o,t.t6=r,t.t6){t.next=22;break}return t.next=21,Object(s.b)();case 21:t.t6=t.sent;case 22:return t.t7=t.t6,t.abrupt("return",t.t4.newBusinessLocator.call(t.t4,!1,t.t5,t.t7));case 24:if(w=null,_.type!==b){t.next=29;break}w=f,t.next=40;break;case 29:if(_.type!==g){t.next=39;break}if(!p||!p.external){t.next=32;break}return t.abrupt("return",this.getLocationForLinkedNotebookGuid(p.guid,p.shardId));case 32:if(null==a){t.next=34;break}return t.abrupt("return",this.actuallyGetLocationForLinkedNotebookGuid({lnbGuid:a.guid}));case 34:if(!d||!d.shardIdFromSharedAuth){t.next=36;break}return t.abrupt("return",this.getLocationForLinkedNotebookGuid(d.guid,d.shardIdFromSharedAuth));case 36:w=v,t.next=40;break;case 39:_.type===E&&f&&(w=f);case 40:if(w&&!k){t.next=52;break}if(!Object(c.d)()){t.next=51;break}if(t.t8=e,t.t9=o,t.t10=r,t.t10){t.next=49;break}return t.next=48,Object(s.b)();case 48:t.t10=t.sent;case 49:return t.t11=t.t10,t.abrupt("return",t.t8.newBusinessLocator.call(t.t8,!1,t.t9,t.t11));case 51:return t.abrupt("return",e.newPersonalLocator(!1,o,r));case 52:return t.abrupt("return",e.newPersonalLocator(!0,w,r));case 53:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getHighestPrivilegeShareForNote",value:function(t,n,r,o,i){var c=l.G,s=l.B,f=l.w,d=l.b,p=b,v=g,h=y,m={ownerId:null,sharedFrom:null,type:null},S=e.getOwnMembership(o,n),_=e.getSharesToSelfForNotebook(r,n),k=e.getSharesToSelfForNote(t,i),w=k.length>0?k.reduce(P):new u.SharedNote({privilege:d}),N={type:p,priv:w.privilege&&f[w.privilege]||d},O=_.length>0?_.reduce(C):new u.SharedNotebook({privilege:d}),I=[N,{type:v,priv:O.privilege&&s[O.privilege]||d},{type:h,priv:S&&S.privilege&&c[S.privilege]||d}],T=a.a.orderBy(I,["priv","type"],["desc","desc"])[0];if(T.priv===d)m.type=E;else switch(T.type){case p:m.sharedFrom=w.sharerUserID,m.type=b;break;case v:m.sharedFrom=O.sharerUserId,m.type=g,m.ownerId=O.userId;break;case h:m.type=y}return m}},{key:"getSharesToSelfForNote",value:function(e,t){return e.sharedNotes?e.sharedNotes.filter(function(e){if(!e.recipientIdentity)return!1;var n=e.recipientIdentity.id;return n&&-1!==t.indexOf(n)}):[]}},{key:"getSharesToSelfForNotebook",value:function(e,t){return e&&e.sharedNotebooks?e.sharedNotebooks.filter(function(e){return e.recipientUserId===t.id||parseInt(e.email||"",10)===t.id}):[]}},{key:"getOwnMembership",value:function(e,t){return e&&e.memberships&&e.memberships.find(function(e){return Boolean(e.common&&e.common.recipientId===t.id)})||null}},{key:"getLocationForWorkspaceGuid",value:function(){var t=h(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getDefaultShard();case 2:return n=t.sent,t.t0=e,t.t1=n,t.next=7,Object(s.b)();case 7:return t.t2=t.sent,r=t.t0.newBusinessLocator.call(t.t0,!1,t.t1,t.t2),t.abrupt("return",r);case 10:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"getLocationForNoteFilter",value:function(){var t=h(regeneratorRuntime.mark(function t(n){var r,o,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.scope){t.next=17;break}r=n.scope,o=r.guid,i=r.type,t.t0=i,t.next=t.t0===u.EntityType.NOTE?5:t.t0===u.EntityType.NOTEBOOK?8:t.t0===u.EntityType.WORKSPACE?11:14;break;case 5:return t.next=7,e.getLocationForNoteGuid(o||"");case 7:return t.abrupt("return",t.sent);case 8:return t.next=10,e.getLocationForNotebookGuid(o||"");case 10:return t.abrupt("return",t.sent);case 11:return t.next=13,e.getLocationForWorkspaceGuid();case 13:return t.abrupt("return",t.sent);case 14:return t.next=16,e.getDefaultLocator();case 16:return t.abrupt("return",t.sent);case 17:return t.next=19,e.getDefaultLocator();case 19:return t.abrupt("return",t.sent);case 20:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}]),e}();t.a=U},370:function(e,t,n){"use strict";n.d(t,"s",function(){return i}),n.d(t,"e",function(){return d}),n.d(t,"o",function(){return p}),n.d(t,"H",function(){return v}),n.d(t,"G",function(){return h}),n.d(t,"R",function(){return m}),n.d(t,"k",function(){return b}),n.d(t,"m",function(){return g}),n.d(t,"l",function(){return y}),n.d(t,"n",function(){return E}),n.d(t,"B",function(){return S}),n.d(t,"I",function(){return _}),n.d(t,"Q",function(){return k}),n.d(t,"N",function(){return w}),n.d(t,"T",function(){return N}),n.d(t,"S",function(){return O}),n.d(t,"i",function(){return f}),n.d(t,"L",function(){return R}),n.d(t,"C",function(){return C}),n.d(t,"P",function(){return I}),n.d(t,"O",function(){return T}),n.d(t,"M",function(){return L}),n.d(t,"a",function(){return A}),n.d(t,"U",function(){return j}),n.d(t,"J",function(){return P}),n.d(t,"t",function(){return x}),n.d(t,"v",function(){return D}),n.d(t,"A",function(){return F}),n.d(t,"r",function(){return V}),n.d(t,"q",function(){return M}),n.d(t,"j",function(){return B}),n.d(t,"K",function(){return H}),n.d(t,"y",function(){return W}),n.d(t,"z",function(){return G}),n.d(t,"w",function(){return K}),n.d(t,"u",function(){return Y}),n.d(t,"h",function(){return z}),n.d(t,"x",function(){return U}),n.d(t,"b",function(){return Q}),n.d(t,"c",function(){return q}),n.d(t,"d",function(){return J}),n.d(t,"p",function(){return Z}),n.d(t,"f",function(){return X}),n.d(t,"g",function(){return $}),n.d(t,"D",function(){return ee}),n.d(t,"E",function(){return te}),n.d(t,"F",function(){return ne});var r,o,i,a=n(377),u=n(504),c=n(470),s=n(62);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e[e.DELETE=46]="DELETE",e[e.BACKSPACE=8]="BACKSPACE",e[e.TAB=9]="TAB",e[e.ENTER=13]="ENTER",e[e.SHIFT=16]="SHIFT",e[e.CONTROL=17]="CONTROL",e[e.CAPS_LOCK=20]="CAPS_LOCK",e[e.ESC=27]="ESC",e[e.SPACEBAR=32]="SPACEBAR",e[e.LEFT=37]="LEFT",e[e.UP=38]="UP",e[e.RIGHT=39]="RIGHT",e[e.DOWN=40]="DOWN",e[e.COMMA=188]="COMMA",e[e.IME=229]="IME"}(i||(i={}));var f,d={KeyA:"a",KeyB:"b",KeyC:"c",KeyD:"d",KeyE:"e",KeyF:"f",KeyG:"g",KeyH:"h",KeyI:"i",KeyJ:"j",KeyK:"k",KeyL:"l",KeyM:"m",KeyN:"n",KeyO:"o",KeyP:"p",KeyQ:"q",KeyR:"r",KeyS:"s",KeyT:"t",KeyU:"u",KeyV:"v",KeyW:"w",KeyX:"x",KeyY:"y",KeyZ:"z",Minus:"-",BracketRight:"[",BracketLeft:"]",Backslash:"\\"},p=[8,10,12,14,18,24,36],v=[0,32],h=[0,28,52,76],m=["http://","https://","evernote://","mailto:"],b="*",g=".jpg,.jpeg,.png,.gif,.tif,.tiff",y=".mp3,.ogg,.oga,.mogg,.aac,.aa,.aax,.flac,.m4a,.wma,.wav",E=Object(u.minutesToMilli)(5),S=Object(u.daysToMilli)(1),_=Object(u.daysToMilli)(7),k=Object(u.daysToMilli)(14),w=Object(u.daysToMilli)(30),N=Object(u.secondsToMilli)(16),O=4;!function(e){e.CARDBOARD_NOTE="cardboard_note",e.CARDBOARD_NOTEBOOK="cardboard_notebook",e.TABLE_ROW="table_row",e.SHORTCUT_HEADER="shortcut_header",e.NOTE_SNIPPET="note_snippet"}(f||(f={}));var I,T,L,A,R={DEFAULT:{i18nKey:"Note.font.default",text:"Default",get name(){return this.text.toLowerCase()},value:"inherit"},GEORGIA:{text:"Georgia",get name(){return this.text.toLowerCase()},value:"georgia,palatina,serif"},HELVETICA:{text:"Helvetica",get name(){return this.text.toLowerCase()},value:"helvetica,arial,sans-serif"},COURIER_NEW:{text:"Courier New",get name(){return this.text.toLowerCase()},value:"courier new,courier,monospace"},TIMES_NEW_ROMAN:{text:"Times New Roman",get name(){return this.text.toLowerCase()},value:"times new roman,times,serif"},TREBUCHET:{text:"Trebuchet",get name(){return"".concat(this.text.toLowerCase()," ms")},value:"trebuchet ms,geneva,sans-serif"},VERDANA:{text:"Verdana",get name(){return this.text.toLowerCase()},value:"verdana,helvetica,sans-serif"}},C=[","," ","\n"];!function(e){e.DOCUMENT_SEARCH_CHOICE="document_search_choice",e.NOTE_SIZE_CHOICE="note_size_choice",e.QUOTA_CHOICE="quota_choice"}(I||(I={})),function(e){e.SHOW="show",e.CLICK="click",e.DISMISS="dismiss",e.NAVIGATE="navigate",e.CLICK_OUTSIDE="click_outside"}(T||(T={})),function(e){e.PATH_TASK_HOME="/task_home",e.PATH_NEW_TASK_DIALOG="/newTask",e.PATH_TASK_EDITOR="/taskEditor",e.SOURCE_TASK_HOME="task_home"}(L||(L={})),function(e){e.eventOperation="eventOperation",e.eventQualifier="eventQualifier",e.eventSubject="eventSubject"}(A||(A={}));var P,j=function(){return 56*(Math.ceil(window.devicePixelRatio)||1)};!function(e){e.ASC="asc",e.DESC="desc"}(P||(P={}));var x;i.UP,i.DOWN,i.LEFT,i.RIGHT,i.ENTER,i.SPACEBAR,i.COMMA,i.ESC;!function(e){e.CODE_BLOCK="CODE_BLOCK",e.FONT_SIZE_DECREASE="FONT_SIZE_DECREASE",e.FONT_SIZE_INCREASE="FONT_SIZE_INCREASE",e.FULL_SCREEN="FULL_SCREEN",e.HIGHLIGHT="HIGHLIGHT",e.INSERT_HORIZONTAL_RULE="INSERT_HORIZONTAL_RULE",e.INSERT_TABLE="INSERT_TABLE",e.JUSTIFY_CENTER="JUSTIFY_CENTER",e.JUSTIFY_LEFT="JUSTIFY_LEFT",e.JUSTIFY_RIGHT="JUSTIFY_RIGHT",e.NEW_NOTE="NEW_NOTE",e.OPEN_LINK="OPEN_LINK",e.QUICKSWITCHER="QUICKSWITCHER",e.STRIKETHROUGH="STRIKETHROUGH",e.SUBSCRIPT="SUBSCRIPT",e.SUPERSCRIPT="SUPERSCRIPT"}(x||(x={}));var U,D=(l(r={},x.FULL_SCREEN,"ctrl+alt+w"),l(r,x.NEW_NOTE,"ctrl+alt+n"),l(r,x.QUICKSWITCHER,"ctrl+alt+q"),l(r,x.CODE_BLOCK,"ctrl+alt+c"),l(r,x.INSERT_TABLE,"ctrl+alt+t"),l(r,x.INSERT_HORIZONTAL_RULE,"ctrl+alt+h"),l(r,x.OPEN_LINK,"ctrl+alt+k"),l(r,x.FONT_SIZE_DECREASE,"ctrl+shift+-"),l(r,x.FONT_SIZE_INCREASE,"ctrl+shift+="),l(r,x.HIGHLIGHT,"ctrl+shift+l"),l(r,x.JUSTIFY_CENTER,"ctrl+shift+\\"),l(r,x.JUSTIFY_LEFT,"ctrl+shift+["),l(r,x.JUSTIFY_RIGHT,"ctrl+shift+]"),l(r,x.STRIKETHROUGH,"ctrl+shift+s"),l(r,x.SUBSCRIPT,"ctrl+shift+,"),l(r,x.SUPERSCRIPT,"ctrl+shift+."),r),F={UNDO:new c.a({mac:{key:"z",modifiers:{command:!0}},windows:{key:"z",modifiers:{control:!0}}}),REDO:new c.a({mac:{key:"z",modifiers:{command:!0,shift:!0}},windows:{key:"y",modifiers:{control:!0}}}),BOLD:new c.a({mac:{key:"b",modifiers:{command:!0}},windows:{key:"b",modifiers:{control:!0}}}),ITALIC:new c.a({mac:{key:"i",modifiers:{command:!0}},windows:{key:"i",modifiers:{control:!0}}}),UNDERLINE:new c.a({mac:{key:"u",modifiers:{command:!0}},windows:{key:"u",modifiers:{control:!0}}}),FONT_CHANGE:new c.a({common:{key:"f",modifiers:{control:!0,alt:!0}}}),OPEN_ATTACHMENT:new c.a({common:{key:"a",modifiers:{control:!0,alt:!0}}}),OPEN_COLOR_DIALOG:new c.a({common:{key:"o",modifiers:{control:!0,alt:!0}}})},V=(Object.keys(F).map(function(e){return F[e].asKeymasterString()}),{GOTO_TAGS:"goto_tags"}),M=l({},V.GOTO_TAGS,new c.a({common:{key:"t",modifiers:{alt:!0,shift:!0}}}).asKeymasterString()),B="…",H="space",W="note",G="notebook",K="LEGACY_SWITCH_MODAL_SHOWED",Y=(l(o={},F.FONT_CHANGE.asKeymasterString(),"font_select"),l(o,F.OPEN_ATTACHMENT.asKeymasterString(),"add_attachment"),l(o,F.OPEN_COLOR_DIALOG.asKeymasterString(),"text_color"),l(o,F.UNDO.asKeymasterString(),"undo"),l(o,F.REDO.asKeymasterString(),"redo"),l(o,F.BOLD.asKeymasterString(),"bold"),l(o,F.ITALIC.asKeymasterString(),"italic"),l(o,F.UNDERLINE.asKeymasterString(),"underline"),o),z=new a.NotesMetadataResultSpec({includeTitle:!0,includeUpdated:!0,includeDeleted:!0,includeNotebookGuid:!0,includeAttributes:!0,includeUpdateSequenceNum:!0});!function(e){e.en="ENGLISH",e.fr="FRENCH",e.de="GERMAN",e.it="ITALIAN",e.ja="JAPANESE",e.ko="KOREAN"}(U||(U={}));var Q=Object.values({white:{value:"#ffffff",id:s.ui,showBorder:!0},gallery:{value:"#ededed",id:s.xc},alto:{value:"#d4d4d4",id:s.X},moonRaker:{value:"#ddd1f3",id:s.rd},moonRaker2:{value:"#f1d1f6",id:s.qd},pigPink:{value:"#fbd0d6",id:s.jf},negroni:{value:"#fedec1",id:s.ce},creamBrulee:{value:"#ffe696",id:s.ab},tara:{value:"#cdeed8",id:s.zh},iceberg:{value:"#cdeef0",id:s.Oc},tropicalBlue:{value:"#cde6f9",id:s.ni},periwinkleGray:{value:"#cdd8ea",id:s.hf},mineShaft:{value:"#3f3f3f",id:s.pd,whiteContent:!0},doveGray:{value:"#737373",id:s.Gb,whiteContent:!0},dustyGray:{value:"#979797",id:s.Hb,whiteContent:!0},mediumPurple:{value:"#8a65e0",id:s.nd,whiteContent:!0},lavender:{value:"#c063d1",id:s.dd,whiteContent:!0},carnation:{value:"#fd5257",id:s.Pa,whiteContent:!0},crusta:{value:"#fd7b39",id:s.db,whiteContent:!0},amber:{value:"#ffc200",id:s.Y,whiteContent:!0},fern:{value:"#56b779",id:s.ac,whiteContent:!0},fountainBlue:{value:"#56bfc4",id:s.wc,whiteContent:!0},pictonBlue:{value:"#54a9e6",id:s.if,whiteContent:!0},sanMarino:{value:"#416ab3",id:s.zf,whiteContent:!0}}),q="#ededed",J=1,Z=[s.j,s.Sa,s.Ta,s.Ua,s.gi],X="optexperimentname",$="optvariationname",ee="regplacementweb",te="WWWSITE_6254_RegistrationPlacementWeb",ne="B_RegisterTSD"},371:function(e,t,n){"use strict";var r=n(56),o=n.n(r),i=n(61),a=n(388);function u(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}var c=o.a.memoize(function(){return i.a.call("notebook.actions.bootstrapAllNotebooks")});function s(){return(s=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){u(i,r,o,a,c,"next",e)}function c(e){u(i,r,o,a,c,"throw",e)}a(void 0)})}}(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.a.wrapBootstrapCall("bootstrapAllNotebooks",c));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var l=function(){return s.apply(this,arguments)};function f(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function d(){return(d=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){f(i,r,o,a,u,"next",e)}function u(e){f(i,r,o,a,u,"throw",e)}a(void 0)})}}(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return",i.a.call("notebook.actions.get",t));case 2:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var p=function(e){return d.apply(this,arguments)};var v=function(e){return i.a.call("notebook.actions.createNotebook",e)};var h,m=function(e,t){return i.a.call("notebook.actions.createnotebookinworkspace",{workspaceGuid:e,notebook:t})},b=n(372);function g(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function y(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){g(i,r,o,a,u,"next",e)}function u(e){g(i,r,o,a,u,"throw",e)}a(void 0)})}}!function(e){e.QUALTRICS_INITIAL_SURVEY="qualtrics_survey_15days",e.QUALTRICS_NINETY_DAYS_SURVEY="qualtrics_survey_90days",e.QUALTRICS_RECURRING_SURVEY="qualtrics_survey_recurring"}(h||(h={}));var E=function(){var e=y(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.call("promotion.actions.get",t);case 2:return n=e.sent,r=n.reduce(function(e,t){return t.promotionId&&(e[t.promotionId]=t),e},{}),i.a.publish("survey","setQualtricsPromotions",r),e.abrupt("return",r);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=y(regeneratorRuntime.mark(function e(t,n){var r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=864e5,e.next=3,Promise.all(Object.keys(t).map(function(){var e=y(regeneratorRuntime.mark(function e(o){var i,a,u,c,s,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t[o],a=n[o],null==(u=0===i.shownCount?a.prevSurvey:a.currentSurvey)||0!==i.shownCount&&!a.isRecurring){e.next=11;break}if(c=Math.floor(Date.now()-u)/r>=a.daysToPassForNextSurvey,null==i.promotionId||!c||0!==i.shownCount||a.isRecurring){e.next=10;break}return e.next=8,E([i.promotionId]);case 8:return s=e.sent,e.abrupt("return",0===s[o].shownCount?s[o].promotionId:"");case 10:return e.abrupt("return",c?i.promotionId:"");case 11:if(0!==i.shownCount||null==i.promotionId){e.next=16;break}return e.next=14,E([i.promotionId]);case 14:return l=e.sent,e.abrupt("return",0===l[o].shownCount?l[o].promotionId:"");case 16:return e.abrupt("return",0===i.shownCount?i.promotionId:"");case 17:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()));case 3:return o=e.sent,e.abrupt("return",o.find(function(e){return""!==e})||"");case 5:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),_=function(){var e=y(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={qualtrics_survey_15days:{daysToPassForNextSurvey:15,isRecurring:!1},qualtrics_survey_90days:{daysToPassForNextSurvey:90,prevSurvey:t[h.QUALTRICS_INITIAL_SURVEY].timeLastShown,isRecurring:!1},qualtrics_survey_recurring:{daysToPassForNextSurvey:180,isRecurring:!0,prevSurvey:t[h.QUALTRICS_NINETY_DAYS_SURVEY].timeLastShown,currentSurvey:t[h.QUALTRICS_RECURRING_SURVEY].timeLastShown}},e.next=3,S(t,n);case 3:return r=e.sent,e.abrupt("return",t[r]||{});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();function k(){return(k=y(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.call("survey.actions.hasPromotions");case 2:if(t=e.sent,n=Object.values(h),!t){e.next=10;break}return e.next=7,i.a.call("survey.actions.getQualtricsPromotions");case 7:e.t0=e.sent,e.next=13;break;case 10:return e.next=12,E(n);case 12:e.t0=e.sent;case 13:return r=e.t0,e.next=16,_(r);case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var w=function(){return k.apply(this,arguments)};var N=function(e){var t=e.guid;return i.a.call("notebook.actions.getlinkednotebook",{guid:t})};var O=function(e){return i.a.call("notebook.actions.getnotebookshares",e)};var I=function(e,t,n){return i.a.call("notebook.actions.joinlinkednotebook",{guid:e,name:t,shardId:n})};var T=function(e){return i.a.call("notebook.actions.joinnotebook",e)};var L=function(e){return i.a.call("notebook.actions.leavenotebook",e)};var A=function(){return i.a.call("linkednotebook.actions.list")};var R=function(e){return i.a.call("notebook.actions.movetoaccount",e)};var C=function(e){var t=e.guid,n=e.recipientSettings;return i.a.call("notebook.actions.setNotebookRecipientSettings",{guid:t,recipientSettings:n})};var P=function(e,t){return i.a.call("notebook.actions.sharenotebooktoself",{notebook:e,userId:t})};function j(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function x(){return(x=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){j(i,r,o,a,u,"next",e)}function u(e){j(i,r,o,a,u,"throw",e)}a(void 0)})}}(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",b.a.isUpSyncDisabled()?i.a.call("notebook.actions.updateservice",t):i.a.call("notebook.actions.updatelocal",t));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var U=function(e){return i.a.call("preference.actions.get",e)};var D=function(e,t){return i.a.call("preference.actions.update",{preferencesToUpdate:e,preferenceNames:t})};var F=function(){return i.a.call("user.actions.sendVerificationEmail")};var V=function(){return i.a.call("user.actions.getThreadsAndIdentities")};var M=function(){return i.a.call("user.actions.get")};var B=function(){return i.a.call("user.actions.getRestrictions")};var H=function(){return i.a.call("user.actions.listBusinessUsers",{})};var W=function(){return i.a.call("user.actions.authToBusiness")};var G=n(365);function K(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function Y(){return(Y=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){K(i,r,o,a,u,"next",e)}function u(e){K(i,r,o,a,u,"throw",e)}a(void 0)})}}(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.a.call("note.actions.select",t));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var z=function(e){return Y.apply(this,arguments)};var Q=function(e,t){return"acquire"===t?i.a.call("note.actions.lock.acquire",e):"release"===t?i.a.call("note.actions.lock.release",e):i.a.call("note.actions.lock.status",e)};var q=function(e){var t=e.noteGuid,n=e.notebookGuid,r=e.noteTitle;return i.a.call("note.actions.copy",{noteGuid:t,notebookGuid:n,noteTitle:r})};var J=function(e){return i.a.call("note.actions.create",e)};var Z=function(){return i.a.call("note.actions.createnotefromkeydown")};var X=function(e){return i.a.call("note.actions.delete",e)};function $(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function ee(){return(ee=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){$(i,r,o,a,u,"next",e)}function u(e){$(i,r,o,a,u,"throw",e)}a(void 0)})}}(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.call("note.actions.findNotesMetadata",t);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),null!=n&&n(),e.t0;case 10:case"end":return e.stop()}},e,this,[[0,6]])}))).apply(this,arguments)}var te=function(e,t){return ee.apply(this,arguments)};var ne=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return i.a.call("note.actions.getNote",{guid:e,resultSpec:t,forceFetch:n})};var re=function(e){return i.a.call("note.actions.getnoteresourcemap",e)};var oe=function(e){return i.a.call("note.actions.getnoteshares",e)};var ie=function(e,t){return i.a.call("note.actions.getsnippets",{guids:e,isVaryingOrigin:!!t})};function ae(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function ue(){return(ue=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){ae(i,r,o,a,u,"next",e)}function u(e){ae(i,r,o,a,u,"throw",e)}a(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.note,r=t.usersToModify,o=t.sharesToRemove,a=t.invitesToRemove,e.abrupt("return",i.a.call("note.actions.managenoteshares",{note:n,usersToModify:r,sharesToRemove:o,invitesToRemove:a}));case 2:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var ce=function(e){return ue.apply(this,arguments)};var se=function(e){return i.a.call("note.actions.select",e)};var le=function(e){return i.a.call("note.actions.share",e)};var fe=function(e){return i.a.call("note.actions.stopsharing",e)};var de=function(e,t){return i.a.call("note.actions.update",{noteChanges:e,resourcesUpdateRequest:t})};var pe=function(e,t){return i.a.call("note.actions.lock.update",{guid:e,lockState:t})};function ve(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function he(){return(he=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){ve(i,r,o,a,u,"next",e)}function u(e){ve(i,r,o,a,u,"throw",e)}a(void 0)})}}(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.a.wrapBootstrapCall("bootstrapTags",function(){return i.a.call("tag.actions.bootstrap")}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var me=function(){return he.apply(this,arguments)};var be=function(e){return i.a.call("tag.actions.create",e)};var ge=function(e){return b.a.isUpSyncDisabled()?i.a.call("tag.actions.deleteService",e):i.a.call("tag.actions.deleteLocal",e)};var ye=function(e,t){return i.a.call("tag.actions.count",{filter:e,notebookGuid:t})};var Ee=function(){return i.a.call("tag.actions.list")};var Se=function(e){return i.a.call("tag.actions.listTagsByNotebook",e)};var _e=function(e){return i.a.call("tag.actions.update",e)};var ke=function(e){return i.a.call("task.actions.create",e)};var we=function(e){return i.a.call("task.actions.delete",e)};var Ne=function(e,t){return i.a.call("task.actions.update",{guid:e,task:t})};var Oe=function(e){return i.a.call("task.actions.setGroup",e)};var Ie=function(e){return i.a.call("task.actions.setView",e)};function Te(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function Le(){return(Le=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){Te(i,r,o,a,u,"next",e)}function u(e){Te(i,r,o,a,u,"throw",e)}a(void 0)})}}(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.a.wrapBootstrapCall("bootstrapWorkspace",function(){return i.a.call("workspace.actions.bootstrap",t)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Ae=function(e){return Le.apply(this,arguments)};function Re(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function Ce(){return(Ce=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){Re(i,r,o,a,u,"next",e)}function u(e){Re(i,r,o,a,u,"throw",e)}a(void 0)})}}(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.a.wrapBootstrapCall("bootstrapWorkspaces",function(){return i.a.call("workspace.actions.bootstrapWorkspaces")}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Pe=function(){return Ce.apply(this,arguments)};var je=function(e,t){return i.a.call("workspace.actions.get",{guid:e,responseSpec:t})};var xe=function(e){return i.a.call("workspace.actions.getcontent",{workspaceResponse:e})};var Ue=function(e){return b.a.isUpSyncDisabled()?i.a.call("workspace.actions.leaveservice",e):i.a.call("workspace.actions.leavelocal",e)};function De(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function Fe(){return(Fe=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){De(i,r,o,a,u,"next",e)}function u(e){De(i,r,o,a,u,"throw",e)}a(void 0)})}}(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.a.call("workspace.actions.see",t));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Ve=function(e){return Fe.apply(this,arguments)};function Me(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function Be(){return(Be=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){Me(i,r,o,a,u,"next",e)}function u(e){Me(i,r,o,a,u,"throw",e)}a(void 0)})}}(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",b.a.isUpSyncDisabled()?i.a.call("workspace.actions.updateService",t):i.a.call("workspace.actions.updateLocal",t));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var He=function(e,t,n){return i.a.call("workspace.actions.getWorkspaceUserInterfaceProperties",{workspaceGuid:e,updateVersion:t,shouldUpdateLocalState:n})};var We=function(e,t,n){return i.a.call("workspace.actions.setWorkspaceUserInterfaceLayoutStyle",{workspaceGuid:e,layoutStyle:t,updateVersion:n})};var Ge=function(e,t,n){return i.a.call("workspace.actions.setNoteUserInterfaceDisplayOrder",{workspaceGuid:e,noteDisplayOrder:t,updateVersion:n})};var Ke=function(e,t,n){return i.a.call("workspace.actions.setNotebookUserInterfaceColors",{workspaceGuid:e,updatedColors:t,updateVersion:n})};function Ye(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function ze(){return(ze=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){Ye(i,r,o,a,u,"next",e)}function u(e){Ye(i,r,o,a,u,"throw",e)}a(void 0)})}}(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Qe=function(){return ze.apply(this,arguments)};function qe(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function Je(){return(Je=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){qe(i,r,o,a,u,"next",e)}function u(e){qe(i,r,o,a,u,"throw",e)}a(void 0)})}}(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.a.wrapBootstrapCall("bootstrapShortcuts",function(){return i.a.call("shortcuts.actions.bootstrap")}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Ze=function(){return Je.apply(this,arguments)},Xe=n(380);function $e(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function et(){return(et=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){$e(i,r,o,a,u,"next",e)}function u(e){$e(i,r,o,a,u,"throw",e)}a(void 0)})}}(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(Xe.getAllPromotionIds)(),e.next=3,i.a.call("promotion.actions.get",t);case 3:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var tt=function(){return et.apply(this,arguments)};var nt=function(e){return i.a.call("promotion.actions.show",e)};var rt=function(){return i.a.call("crosspromotion.actions.get")};var ot=function(){return i.a.call("sync.actions.get",void 0)};var it=function(e){return i.a.call("sync.actions.getWithMetrics",e)},at=n(367);function ut(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function ct(){return(ct=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){ut(i,r,o,a,u,"next",e)}function u(e){ut(i,r,o,a,u,"throw",e)}a(void 0)})}}(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new at.a(!0,!1,n,null),e.next=3,i.a.call("sync.actions.runBusinessMessageSyncCycleOnce",{locator:r,userId:t});case 3:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var st=function(e,t){return ct.apply(this,arguments)};function lt(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function ft(){return(ft=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){lt(i,r,o,a,u,"next",e)}function u(e){lt(i,r,o,a,u,"throw",e)}a(void 0)})}}(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new at.a(!0,!1,n,null),e.next=3,i.a.call("sync.actions.runPersonalMessageSyncCycleOnce",{locator:r,userId:t});case 3:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var dt=function(e,t){return ft.apply(this,arguments)};var pt=function(e){var t=e.businessShard,n=e.shardId,r=e.userId;return b.a.isPreventingDownSync()?i.a.call("user.actions.listBusinessUsers",{}):i.a.call("sync.actions.runbusinesssynccycle",{businessShard:t,shardId:n,userId:r})};var vt=function(e){var t=e.shardId,n=e.userId;if(!b.a.isPreventingDownSync())return i.a.call("sync.actions.runpersonalsynccycle",{shardId:t,userId:n})};var ht=function(e){return i.a.call("logrequest.actions.send",e)};var mt=function(e){return i.a.call("experiments.actions.getprops",e)};var bt=function(e){return i.a.call("experiments.actions.getservicestate",e)};var gt=function(){return i.a.call("commengine.actions.getcommengine")};var yt=function(e){return i.a.call("commengine.actions.syncmessages",e)};var Et=function(e){return i.a.call("commengine.actions.updatecommengine",e)};var St=function(e){return i.a.call("search.actions.findSearchSuggestionsV2",e)};var _t=function(){return i.a.call("quickswitcher.actions.getrecentqueries")};var kt=function(e){return i.a.call("quickswitcher.actions.setrecentqueries",e)};var wt=function(e){return i.a.call("submitfeedback.actions.filesupportticket",e)};t.a={createNotebook:v,createNotebookInWorkspace:m,expungeNotebook:function(e){return b.a.isUpSyncDisabled()?i.a.call("notebook.actions.expungeNotebookService",e):i.a.call("notebook.actions.expungeNotebookLocal",e)},getLinkedNotebook:N,getNotebookShares:O,joinLinkedNotebook:I,joinNotebook:T,leaveNotebook:L,listLinkedNotebooks:A,moveNotebookToAccount:R,setNotebookRecipientSettings:C,shareNotebookToSelf:P,updateNotebook:function(e){return x.apply(this,arguments)},authenticateToBusiness:W,fetchActiveBusinessUsers:H,getTsdEligibility:function(){return i.a.call("user.actions.gettsdeligibility")},getThreadsAndIdentities:V,getUser:M,getUserRestrictions:B,initiateSSO:function(){return i.a.call("business.sso.start")},logout:function(){return Object(G.e)()},sendVerificationEmail:F,getPreferences:U,updatePreferences:D,fetchAllPromotions:tt,showPromotion:nt,fetchQualtricsSurvey:w,getCrossPromotionInfo:rt,getSyncState:ot,getSyncStateWithMetrics:it,runBusinessMessageSyncCycleOnce:st,runPersonalMessageSyncCycleOnce:dt,startBusinessDownsync:pt,startPersonalDownsync:vt,callLockRPC:Q,copyNote:q,createNote:J,createNoteFromKeyDown:Z,deleteNote:X,expungeNotes:function(e){return b.a.isUpSyncDisabled()?i.a.call("note.actions.expungeNotesService",e):i.a.call("note.actions.expungeNotesLocal",e)},findNotesMetadata:te,getNote:ne,getNoteResourceMap:re,getNoteShares:oe,getNoteSnippets:ie,manageNoteShares:ce,selectNote:se,shareNote:le,stopSharingNote:fe,updateNote:de,updateNoteLock:pe,bootstrapTags:me,createTag:be,deleteTag:ge,findNoteCounts:ye,listTags:Ee,listTagsByNotebook:Se,updateTag:_e,createTask:ke,deleteTask:we,updateTask:Ne,setTaskGroup:Oe,setTaskView:Ie,addUsersToWorkspace:function(e){var t=e.workspaceGuid,n=e.userIds,r=e.privilegeLevel;return i.a.call("workspace.actions.addusers",{workspaceGuid:t,userIds:n,privilegeLevel:r})},createWorkspace:function(e){return i.a.call("workspace.actions.create",e)},getWorkspace:je,getWorkspaceContent:xe,getParentWorkspaceForNotebook:function(e){return i.a.call("notebook.actions.getparentworkspace",e)},leaveWorkspace:Ue,manageWorkspaceSharing:function(e){var t=e.workspaceGuid,n=e.membershipsToUpdate,r=e.invitationsToCreateOrUpdate,o=e.membershipsToRemove;return i.a.call("workspace.actions.managesharing",{workspaceGuid:t,membershipsToUpdate:n,invitationsToCreateOrUpdate:r,membershipsToRemove:o})},removeUsersFromWorkspace:function(e){var t=e.workspaceGuid,n=e.userIds;return i.a.call("workspace.actions.removeusers",{workspaceGuid:t,userIds:n})},seeWorkspace:Ve,updateWorkspace:function(e){return Be.apply(this,arguments)},getWorkspaceUserInterfaceProperties:He,setWorkspaceUserInterfaceLayoutStyle:We,setNoteUserInterfaceDisplayOrder:Ge,setNotebookUserInterfaceDisplayOrder:function(e,t,n){return i.a.call("workspace.actions.setNotebookUserInterfaceDisplayOrder",{workspaceGuid:e,notebookDisplayOrder:t,updateVersion:n})},setNotebookUserInterfaceColors:Ke,bootstrapAllNotebooks:l,bootstrapNote:z,bootstrapNotebook:p,bootstrapShared:Qe,bootstrapShortcuts:Ze,bootstrapWorkspace:Ae,bootstrapWorkspaces:Pe,sendLogRequest:ht,getExperimentProps:mt,getExperimentsServiceState:bt,getCommEngine:gt,syncCommEngineMessages:yt,updateCommEngine:Et,findSearchSuggestionsV2:St,getQuickSwitcherQueries:_t,updateQuickSwitcherQueries:kt,fileSupportTicket:wt}},372:function(e,t,n){"use strict";var r=n(64),o=n.n(r),i=n(440),a=n(980),u=n(970),c=n(61),s=n(79),l=n(3084),f=n(110);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=new(function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),h(this,m(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,f["a"]),function(e,t,n){t&&v(e.prototype,t),n&&v(e,n)}(t,[{key:"init",value:function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){p(i,r,o,a,u,"next",e)}function u(e){p(i,r,o,a,u,"throw",e)}a(void 0)})}}(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this._values="object"===("undefined"==typeof window?"undefined":d(window))&&window.localStorage||{};case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getValue",value:function(e,t,n){var r=this._values[e];if(void 0!==t&&"true"===r)return t;if(void 0!==n&&"false"===r)return n;try{return JSON.parse(r)}catch(e){return r}}},{key:"isTrueOrUnset",value:function(e){var t=this.getValue(e);return!0===t||void 0===t}}]),t}()),y=n(3079),E=n(43),S=n.n(E);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function w(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){k(i,r,o,a,u,"next",e)}function u(e){k(i,r,o,a,u,"throw",e)}a(void 0)})}}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var O=S.a.EVERNOTE_BUSINESS_ID,I=S.a.RTE_WS_SERVER,T=S.a.RTE_HTTP_SERVER,L=i.a.isNode,A=Object({BRANCH_NAME:void 0,NODE_ENV:"production",BASE_URL:"https://www.evernote.com/",CORP_BASE_URL:"https://evernote.com/",BORON:!1,SERVICE_ID:"ion"}),R=A.NODE_ENV,C=A.BRANCH_NAME,P=A.BORON,j=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isInitialized=void 0,this.serviceLoader=void 0,this.resolveAfterLoad=[],this._computeValue=function(e,n){if(null==n)throw new Error("validator is required for #_computeValue");if(!t.isInitialized)throw new Error("Cannot retrieve config value before instantiation.");for(var r=0;r<e.length;r++){var o=e[r];if(n(o))return o}throw new Error("Valid value could not be computed. Valid default may not have been set.")},this.isInitialized=!1,c.a.subscribe("system.network",function(e){var n=e.data;t.isInitialized&&L&&n&&l.a.isEmpty()&&l.a.init().then(function(){t.serviceLoader=l.a,y.a.storeOpts(l.a._values)})})}return function(e,t,n){t&&N(e.prototype,t),n&&N(e,n)}(e,[{key:"init",value:function(){var e=w(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t&&(y.a.currentUserId=t),e.next=4,s.a.init();case 4:if(!s.a.isEmpty()){e.next=22;break}return e.prev=5,e.next=8,l.a.init(!L);case 8:if(this.serviceLoader=l.a,!L){e.next=12;break}return e.next=12,y.a.storeOpts(l.a._values);case 12:e.next=20;break;case 14:if(e.prev=14,e.t0=e.catch(5),!L){e.next=20;break}return e.next=19,y.a.init();case 19:this.serviceLoader=y.a;case 20:e.next=23;break;case 22:this.serviceLoader=s.a;case 23:return e.next=25,g.init();case 25:e.next=30;break;case 27:throw e.prev=27,e.t1=e.catch(0),e.t1;case 30:this.resolveAfterLoad.forEach(function(e){e()}),this.isInitialized=!0;case 32:case"end":return e.stop()}},e,this,[[0,27],[5,14]])}));return function(t){return e.apply(this,arguments)}}()},{key:"ensureLoaded",value:function(){var e=w(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isInitialized){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return",new Promise(function(e){t.resolveAfterLoad.push(e)}));case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_getValueFromQueryString",value:function(e,t){if(!L){var n,r=o.a.parse(window.location.search);if(r)try{n=t&&"string"==typeof r[e]?JSON.parse(r[e]):r[e]}catch(t){n=r[e]}return n}}},{key:"isMicroserviceCommunicationEnabled",value:function(){var e="MICROSERVICES_ENABLED";return this._computeValue([this.serviceLoader.getValue(e),g.getValue(e),!0],function(e){return[!0,!1].includes(e)})}},{key:"getCELogLevel",value:function(){return this._computeValue([g.getValue("ce","ALL","OFF"),this.serviceLoader.getValue("CE_LOG_LEVEL"),"OFF"],function(e){return["ALL","FINE","CONFIG","INFO","WARNING","OFF"].includes(e)})}},{key:"isFLEEnabled",value:function(){if(P)return!1;var e="fleEnabled";return this._computeValue([this._getValueFromQueryString(e,!0),g.getValue(e),this.serviceLoader.getValue(e),!0],function(e){return[!0,!1].includes(e)})}},{key:"isPersonalEnabled",value:function(){return this._computeValue([this._getValueFromQueryString("PERSONAL",!0),g.getValue("PERSONAL"),!0],function(e){return[!0,!1].includes(e)})}},{key:"isRTEEnabled",value:function(){var e=[this.serviceLoader.getValue("RTE_ENABLED")&&g.isTrueOrUnset("rte"),!1],t=[this._getValueFromQueryString("rte",!0),g.getValue("rte"),this.serviceLoader.getValue("RTE_ENABLED"),!1];return this._computeValue("www.evernote.com"===this.getHost()?e:t,function(e){return[!0,!1].includes(e)})&&this.isMicroserviceCommunicationEnabled()}},{key:"isUnsupportedBrowserEnabled",value:function(){return this._computeValue([g.getValue("platform"),this.serviceLoader.getValue("UNSUPPORTED_BROWSER_ENABLED"),!1],function(e){return[!0,!1].includes(e)})}},{key:"isChinaService",value:function(){var e="CHINA_SERVICE";return this._computeValue([this._getValueFromQueryString(e,!0),g.getValue(e),this.serviceLoader.getValue(e),!1],function(e){return[!0,!1].includes(e)})}},{key:"isSimulateLoad",value:function(){var e="simulateLoad";return this._computeValue([this._getValueFromQueryString(e,!0),g.getValue(e),!1],function(e){return[!0,!1].includes(e)})}},{key:"isServiceDown",value:function(){var e="SERVICE_DOWN";return this._computeValue([this._getValueFromQueryString(e,!0),g.getValue(e),!1],function(e){return[!0,!1].includes(e)})}},{key:"isUserCreatedAfterBusinessGA",value:function(){return this._computeValue([g.getValue("SIMULATE_USER_CREATED_AFTER_ION_GA"),this.serviceLoader.getValue("USER_CREATED_AFTER_SPACES_GA"),!1],function(e){return[!0,!1].includes(e)})}},{key:"isSearchV3Enabled",value:function(){var e="SEARCH_V3_ENABLED";return this._computeValue([this._getValueFromQueryString(e,!0),g.getValue(e),this.serviceLoader.getValue(e),!1],function(e){return[!0,!1].includes(e)})}},{key:"getBaseUrl",value:function(){return this._computeValue([this.serviceLoader.getValue("SERVICE_BASE_URL"),"object"===("undefined"==typeof window?"undefined":_(window))&&window.location.origin,"https://www.evernote.com"],function(e){return"string"==typeof e&&e.startsWith("http")})}},{key:"getHost",value:function(){return new URL(this.getBaseUrl()).host}},{key:"isProd",value:function(){return"www.evernote.com"===this.getHost()}},{key:"isDev",value:function(){return"production"!==R}},{key:"isTest",value:function(){return"test"===R}},{key:"isStage",value:function(){return"stage.evernote.com"===this.getHost()}},{key:"getFeatureBranch",value:function(){return C||null}},{key:"getRTEWSServer",value:function(){return this.isDev()?"ws://".concat(I):"https://rte.".concat(this.getHost())}},{key:"getRTEHTTPServer",value:function(){return this.isDev()?"".concat(window.location.protocol,"//").concat(T):"https://rte.".concat(this.getHost())}},{key:"getTasksServer",value:function(){return this.isDev()?this.getRTEHTTPServer():"https://m1.svc.".concat(this.getHost())}},{key:"getRTSClientAPIKey",value:function(){if(this.isDev())return S.a.TASKS_FIRESTORE_API_KEY;var e="RTS_CLIENT_API_KEY";return this._computeValue([g.getValue(e),this.serviceLoader.getValue(e),""],function(e){return"string"==typeof e})}},{key:"getRTSClientProjectId",value:function(){if(this.isDev())return S.a.TASKS_FIRESTORE_PROJECT_ID;var e="RTS_CLIENT_API_PROJECT_ID";return this._computeValue([g.getValue(e),this.serviceLoader.getValue(e),""],function(e){return"string"==typeof e})}},{key:"getRTSClientNamespace",value:function(){return this.isDev()?S.a.TASKS_FIRESTORE_NAMESPACE:""}},{key:"isExperimentsServiceEnabled",value:function(){if(P)return!1;var e="EXPERIMENTS_SERVICE_ENABLED";return this._computeValue([this._getValueFromQueryString(e,!0),g.getValue(e),this.serviceLoader.getValue(e),!1],function(e){return[!0,!1].includes(e)})&&this.isMicroserviceCommunicationEnabled()}},{key:"isStacksEnabled",value:function(){if(P&&a.a&&a.a.general)return Boolean(a.a.general.stacksEnabled);var e="STACKS_ENABLED";return this._computeValue([this._getValueFromQueryString(e,!0),g.getValue(e),!1],function(e){return[!0,!1].includes(e)})}},{key:"isSidebarCollapsable",value:function(){var e="IS_SIDEBAR_COLLAPSABLE";return this._computeValue([this._getValueFromQueryString(e,!0),g.getValue(e),!1],function(e){return[!0,!1].includes(e)})}},{key:"isExperimentsQAToolEnabled",value:function(){var e="EXPERIMENTS_QA_TOOL_ENABLED";return this._computeValue([this._getValueFromQueryString(e,!0),g.getValue(e),this.serviceLoader.getValue(e),!1],function(e){return[!0,!1].includes(e)})}},{key:"getChecklistStartDate",value:function(){var e=this.serviceLoader.getValue("CHECKLIST_START_DATE");return new Date(e||"2018-11-28")}},{key:"getIntercomHmacUserHash",value:function(){return this.serviceLoader.getValue("INTERCOM_HMAC_USER_HASH")}},{key:"getNewUserFreeTrialPromoCode",value:function(){return this.serviceLoader.getValue("NEW_USER_FREE_TRIAL_PROMO_CODE")}},{key:"isMultiauthAccountSwitcherEnabled",value:function(){var e="MULTIAUTH_ACCOUNT_SWITCHER_ENABLED";return this._computeValue([this._getValueFromQueryString(e,!0),g.getValue(e),this.serviceLoader.getValue(e),!1],function(e){return[!0,!1].includes(e)})}},{key:"getEvernoteBusinessId",value:function(){return this._computeValue([g.getValue("EVERNOTE_BIZ_ID"),O],function(e){return"number"==typeof e})}},{key:"getIntercomAppId",value:function(){return this.serviceLoader.getValue("INTERCOM_APP_ID")}},{key:"isIntercomEnabled",value:function(){var e="IS_INTERCOM_ENABLED";return this._computeValue([g.getValue(e),this.serviceLoader.getValue(e),!1],function(e){return"boolean"==typeof e})}},{key:"isCommEngineEnabled",value:function(){var e="COMM_ENGINE_ENABLED";return this._computeValue([g.getValue(e),this.serviceLoader.getValue(e),!1],function(e){return[!0,!1].includes(e)})}},{key:"isBoardViewEnabled",value:function(){var e="BOARD_VIEW_ENABLED";return this._computeValue([g.getValue(e),this.serviceLoader.getValue(e),!1],function(e){return[!0,!1].includes(e)})}},{key:"getBoardViewSyncInterval",value:function(){var e="BOARD_VIEW_SYNC_INTERVAL";return this._computeValue([g.getValue(e),this.serviceLoader.getValue(e),5e3],function(e){return"number"==typeof e})}},{key:"isUpSyncDisabled",value:function(){return this._computeValue([g.getValue("UP_SYNC_DISABLED"),!0],function(e){return[!0,!1].includes(e)})}},{key:"isPreventingDownSync",value:function(){var e="isPreventingDownSync";return this._computeValue([this._getValueFromQueryString(e,!0),g.getValue(e),!1],function(e){return[!0,!1].includes(e)})||Object(u.a)()}},{key:"isKeyboardShortcutsEnabled",value:function(){var e="IS_KEYBOARD_SHORTCUTS_ENABLED";return this._computeValue([this._getValueFromQueryString(e,!0),g.getValue(e),!1],function(e){return[!0,!1].includes(e)})}},{key:"isQuickSwitcherEnabled",value:function(){var e="QUICK_SWITCHER_ENABLED";return this._computeValue([this._getValueFromQueryString(e,!0),g.getValue(e),!1],function(e){return[!0,!1].includes(e)})}},{key:"isTasksEnabled",value:function(){return!1}},{key:"isCETemplateEnabled",value:function(){var e="TEMPLATES_ENABLED";return this._computeValue([this._getValueFromQueryString(e,!0),g.getValue(e),this.serviceLoader.getValue(e),!0],function(e){return[!0,!1].includes(e)})&&this.isMicroserviceCommunicationEnabled()}},{key:"getTsdTimingDelay",value:function(){var e="TSD_TIMING_DELAY";return this._computeValue([g.getValue(e),this.serviceLoader.getValue(e),-1],function(e){return"number"==typeof e})}},{key:"isPesoAvailable",value:function(){var e=this.isProd();return!!(this.isEvernoter()||this.serviceLoader.getValue("PESO_ENABLED")||!e&&this._getValueFromQueryString("PESO_AVAILABLE",!0)||!e&&g.getValue("PESO_AVAILABLE"))}},{key:"isEvernoter",value:function(){return this._computeValue([this.serviceLoader.getValue("IS_EVERNOTER"),!1],function(e){return[!0,!1].includes(e)})}},{key:"isBootstrappingEnabled",value:function(){var e="isBootstrappingEnabled";return this._computeValue([this._getValueFromQueryString(e,!0),g.getValue(e),!1],function(e){return[!0,!1].includes(e)})||Object(u.a)()}},{key:"isHVAEnabled",value:function(){if(P)return!1;var e="HVA_ENABLED";return this._computeValue([this._getValueFromQueryString(e,!0),g.getValue(e),!1],function(e){return[!0,!1].includes(e)})}},{key:"isHVACarouselForced",value:function(){var e="HVA_FORCE_CAROUSEL";return this._computeValue([this._getValueFromQueryString(e,!0),g.getValue(e),!1],function(e){return[!0,!1].includes(e)})}},{key:"areInNoteTasksEnabled",value:function(){var e="IN_NOTE_TASKS_ENABLED";if(!this.isTasksEnabled())return!1;var t=[this._getValueFromQueryString(e,!0),g.getValue(e)],n=[].concat(t,[!1]),r=this.isEvernoter()?[].concat(t,[!1]):[!1];return this._computeValue(this.isProd()?r:n,function(e){return[!0,!1].includes(e)})&&this.isMicroserviceCommunicationEnabled()}},{key:"simulateLoad",value:function(){var e="simulateLoad";return this._computeValue([this._getValueFromQueryString(e,!0),g.getValue(e),!1],function(e){return[!0,!1].includes(e)})}},{key:"isReactStrictModeEnabled",value:function(){var e="isReactStrict";return this._computeValue([this._getValueFromQueryString(e,!0),g.getValue(e),!1],function(e){return[!0,!1].includes(e)})}}]),e}();t.a=new j},378:function(e,t,n){"use strict";var r,o,i,a=n(558),u=n(369);function c(){if(null==r)throw new Error("calling #getIsBusiness too early. Data not available yet.");return r}function s(){return d()?Object(a.a)():c()}function l(){return null!=r}function f(){if(null==o)throw new Error("calling #getIsBusinessOnly too early. Data not available yet.");return o}function d(){return c()&&!f()}function p(e){r=e}function v(e){o=e,e&&(r=e)}function h(e){return null!=e.businessUserInfo}function m(e){v(function(e){return e.serviceLevel===u.ServiceLevel.BUSINESS}(e))}function b(e){p(h(e))}function g(){i=!0,p(!1),v(!1)}function y(){return!!i}n.d(t,"a",function(){return b}),n.d(t,"b",function(){return m}),n.d(t,!1,function(){return h}),n.d(t,"c",function(){return y}),n.d(t,"d",function(){return s}),n.d(t,"e",function(){return f}),n.d(t,"f",function(){return d}),n.d(t,!1,function(){return l}),n.d(t,"g",function(){return g})},380:function(e,t,n){"use strict";n.r(t),n.d(t,"Constants",function(){return a}),n.d(t,"allNotesHVAPromotions",function(){return u}),n.d(t,"allNotesChecklistPromotions",function(){return c}),n.d(t,"PROMOTION_IDS",function(){return l}),n.d(t,"getAllPromotionIds",function(){return f}),n.d(t,"getPromotionsOfType",function(){return d}),n.d(t,"getChildPromotions",function(){return p});var r=n(56),o=n.n(r);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a={FLOW:0,QUALTRICS:1,HVA:2,HVA_GROUP:3,MODAL:4,ONBOARDING_CHECKLIST:5,BANNER:6},u={ALL_NOTES_ACTIVITY_HVA:{type:a.HVA_GROUP,promotionId:"AllNotes_HVAGroup_ActivityStack"},DESKTOP_ACTIVITY_HVA:{type:a.HVA,promotionId:"AllNotes_HVA_DesktopActivity"},MOBILE_CLIENT_HVA:{type:a.HVA,promotionId:"AllNotes_HVA_MobileClient"},ATTACHMENT_ACTIVITY_HVA:{type:a.HVA,promotionId:"AllNotes_HVA_AttachmentActivity"},COVER_HVA:{type:a.HVA,promotionId:"AllNotes_HVA_Cover"},WEB_CLIPPER_HVA:{type:a.HVA,promotionId:"AllNotes_HVA_WebClipper"}},c={CAN_SHOW_CHECKLIST:{type:a.ONBOARDING_CHECKLIST,promotionId:"AllNotes_Checklist_CanShow"},CLOSE_CHECKLIST:{type:a.ONBOARDING_CHECKLIST,promotionId:"AllNotes_Checklist_Close"},OPENED_CHECKLIST:{type:a.ONBOARDING_CHECKLIST,promotionId:"AllNotes_Checklist_Opened"},FIRST_NOTE_MODAL:{type:a.ONBOARDING_CHECKLIST,promotionId:"AllNotes_Checklist_FirstModal"},ADD_ATTACHMENTS_MODAL:{type:a.ONBOARDING_CHECKLIST,promotionId:"AllNotes_Checklist_AddAttach"},WEB_CLIPPER_MODAL:{type:a.ONBOARDING_CHECKLIST,promotionId:"AllNotes_Checklist_WebClipper"},SYNC_DEVICES_MODAL:{type:a.ONBOARDING_CHECKLIST,promotionId:"AllNotes_Checklist_SyncDevices"}},s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){i(e,t,n[t])})}return e}({FIRST_LAUNCH_EXISTING_USER:{promotionId:"onboarding_Ion_FLE",type:a.FLOW},FIRST_LAUNCH_EXISTING_PERSONAL_USER:{promotionId:"onboarding_Ion_Personal_FLE",type:a.FLOW},FIRST_LAUNCH_NEW_PERSONAL_USER:{promotionId:"onboarding_Ion_NewPersonal_FLE",type:a.FLOW},FIRST_LAUNCH_WITH_TRIAL_NEW_PERSONAL_USER:{promotionId:"ion7808_FT_Ion_NewPersonal_FLE",type:a.FLOW},FIRST_LAUNCH_NEW_ADMIN_FIRST_MODAL_ION7237:{promotionId:"ion7237_FLE_NewAdmin_FirstModal",type:a.FLOW},FIRST_LAUNCH_NEW_ADMIN_ION7237:{promotionId:"ion7237_FLE_NewAdmin",type:a.FLOW},FIRST_LAUNCH_NEW_ADMIN_FIRST_MODAL:{promotionId:"spacy248_FLE_NewAdmin_FirstModal",type:a.FLOW},FIRST_LAUNCH_NEW_ADMIN:{promotionId:"spacy248_FLE_NewAdmin",type:a.FLOW},FIRST_LAUNCH_NEW_USER:{promotionId:"spacy249_FLE_NewUser",type:a.FLOW},CREATED_SPACE:{promotionId:"onboarding_Ion_CreatedSpace",type:a.FLOW},INVITED_TO_SPACE:{promotionId:"onboarding_Ion_InviteToSpace",type:a.FLOW},ATTACH_FILE_FROM_EMPTY_STATE:{promotionId:"onboarding_Ion_AttachFileFromEmptyState",type:a.FLOW},WAS_EMPTY_SPACE:{promotionId:"spacy256_wasEmptySpace",type:a.FLOW},SPACE_DIRECTORY_FLE:{promotionId:"onboarding_Ion_SpaceDirectoryFLE",type:a.FLOW},DOWNLOAD_EVERNOTE:{promotionId:"ion4983_DownloadEvernote",type:a.FLOW},FREE_TRIAL_WITH_DOWNLOAD_EVERNOTE:{promotionId:"ion7808_FT_DownloadEvernote",type:a.FLOW},FREE_TRIAL:{promotionId:"ion7808_newUserFreeTrialFlow",type:a.FLOW},DOCUMENT_SEARCH_CHOICE:{promotionId:"document_search_choice_ion",type:a.MODAL},ATTACHMENT_NUMBER:{promotionId:"attachment_number_ion",type:a.FLOW},TSD_SHARED:{promotionId:"tierdisplay_shared",type:a.FLOW},TSD_WEB:{promotionId:"tierdisplay_web",type:a.FLOW},NEW_USER_FREE_TRIAL_BANNER:{promotionId:"ion7808_newUserFreeTrialBanner",type:a.BANNER},NEW_USER_FREE_TRIAL_MODAL:{promotionId:"ion7808_newUserFreeTrialModal",type:a.MODAL},SESSION_COUNT:{promotionId:"ion7808_sessionCount",type:a.FLOW},ADAPTIVE_NOTE_EDIT:{promotionId:"adaptiveNoteEdit",type:a.MODAL},SHORTCUTS_STARTER:{promotionId:"shortcutsStarter",type:a.MODAL}},u,c),l=Object.keys(s).reduce(function(e,t){var n=s[t];return e[t]=n.promotionId,e},{});function f(){return function e(t){return o.a.flattenDeep(Object.keys(t).map(function(n){var r=t[n],o=r.promotionId;return r.children?e(r.children):o}))}(s)}function d(e){return Object.keys(s).reduce(function(t,n){var r=s[n];return e===r.type&&(t[n]=r.promotionId),t},{})}function p(e){var t=s[e];return null==t||null==t.children?null:t.children}},381:function(e,t,n){"use strict";var r,o,i,a,u,c,s,l=n(377),f=(n(61),n(369)),d=n(397),p=n(637),v=n(378),h=(n(439),n(422),n(413),n(966),n(555),n(477),n(463),n(476),n(438),n(554),n(553),n(965),n(964),n(636),n(635),n(552),n(634),n(437),n(963),n(633));function m(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"b",function(){return g}),n.d(t,"a",function(){return y}),n.d(t,"w",function(){return O}),n.d(t,"B",function(){return T}),n.d(t,"G",function(){return A}),n.d(t,"l",function(){return j}),n.d(t,"o",function(){return x}),n.d(t,"n",function(){return U}),n.d(t,"m",function(){return D}),n.d(t,"r",function(){return V}),n.d(t,"q",function(){return M}),n.d(t,"p",function(){return H}),n.d(t,"E",function(){return W}),n.d(t,"D",function(){return G}),n.d(t,"y",function(){return K}),n.d(t,"x",function(){return Y}),n.d(t,"z",function(){return z}),n.d(t,"t",function(){return Q}),n.d(t,"s",function(){return q}),n.d(t,"k",function(){return J}),n.d(t,"j",function(){return Z}),n.d(t,"d",function(){return X}),n.d(t,"e",function(){return $}),n.d(t,"F",function(){return ee}),n.d(t,"C",function(){return te}),n.d(t,"v",function(){return ne}),n.d(t,"c",function(){return re}),n.d(t,"g",function(){return ie}),n.d(t,"A",function(){return ae}),n.d(t,"u",function(){return ue}),n.d(t,"i",function(){return ce}),n.d(t,"h",function(){return se}),n.d(t,"f",function(){return le});var g=-100,y=300,E=[f.SharedNotePrivilegeLevel.MODIFY_NOTE,f.SharedNotePrivilegeLevel.FULL_ACCESS],S=[f.SharedNotePrivilegeLevel.FULL_ACCESS],_=[f.SharedNotebookPrivilegeLevel.MODIFY_NOTEBOOK_PLUS_ACTIVITY,f.SharedNotebookPrivilegeLevel.FULL_ACCESS,f.SharedNotebookPrivilegeLevel.BUSINESS_FULL_ACCESS],k=[f.SharedNotebookPrivilegeLevel.FULL_ACCESS,f.SharedNotebookPrivilegeLevel.BUSINESS_FULL_ACCESS],w=[d.WorkspacePrivilegeLevel.EDIT,d.WorkspacePrivilegeLevel.EDIT_AND_MANAGE],N=[d.WorkspacePrivilegeLevel.EDIT_AND_MANAGE],O=(b(r={},f.SharedNotePrivilegeLevel.READ_NOTE,100),b(r,f.SharedNotePrivilegeLevel.MODIFY_NOTE,200),b(r,f.SharedNotePrivilegeLevel.FULL_ACCESS,y),r),I=(b(o={},100,f.SharedNotePrivilegeLevel.READ_NOTE),b(o,200,f.SharedNotePrivilegeLevel.MODIFY_NOTE),b(o,y,f.SharedNotePrivilegeLevel.FULL_ACCESS),o),T=(b(i={},f.SharedNotebookPrivilegeLevel.READ_NOTEBOOK,100),b(i,f.SharedNotebookPrivilegeLevel.MODIFY_NOTEBOOK_PLUS_ACTIVITY,200),b(i,f.SharedNotebookPrivilegeLevel.READ_NOTEBOOK_PLUS_ACTIVITY,100),b(i,f.SharedNotebookPrivilegeLevel.FULL_ACCESS,y),b(i,f.SharedNotebookPrivilegeLevel.BUSINESS_FULL_ACCESS,y),i),L=(b(a={},100,f.SharedNotebookPrivilegeLevel.READ_NOTEBOOK_PLUS_ACTIVITY),b(a,200,f.SharedNotebookPrivilegeLevel.MODIFY_NOTEBOOK_PLUS_ACTIVITY),b(a,y,f.SharedNotebookPrivilegeLevel.FULL_ACCESS),a),A=(b(u={},d.WorkspacePrivilegeLevel.READ,100),b(u,d.WorkspacePrivilegeLevel.EDIT,200),b(u,d.WorkspacePrivilegeLevel.EDIT_AND_MANAGE,y),u),R=(b(c={},100,d.WorkspacePrivilegeLevel.READ),b(c,200,d.WorkspacePrivilegeLevel.EDIT),b(c,y,d.WorkspacePrivilegeLevel.EDIT_AND_MANAGE),c),C=(b(s={},l.ShareRelationshipPrivilegeLevel.READ_NOTEBOOK,100),b(s,l.ShareRelationshipPrivilegeLevel.READ_NOTEBOOK_PLUS_ACTIVITY,100),b(s,l.ShareRelationshipPrivilegeLevel.MODIFY_NOTEBOOK_PLUS_ACTIVITY,200),b(s,l.ShareRelationshipPrivilegeLevel.FULL_ACCESS,y),s),P=function(e,t,n){var r=t?t.id:null,o=r?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object.values(e).filter(function(e){return e.userId===t})}(n,r).map(function(e){return e.id}):[];return e.filter(function(e){var t=e.recipientIdentityId;return e.recipientUserId===r||null!=t&&-1!==o.indexOf(t)})},j=function(e){switch(e){case f.EntityType.NOTE:return f.SharedNotePrivilegeLevel.FULL_ACCESS;case f.EntityType.NOTEBOOK:return f.SharedNotebookPrivilegeLevel.FULL_ACCESS;case f.EntityType.WORKSPACE:return d.WorkspacePrivilegeLevel.EDIT_AND_MANAGE}},x=function(e,t){if(t&&t.memberships){var n=t.memberships.filter(function(t){return e&&t.common&&t.common.recipientId===e.id}).map(function(e){return e.privilege||0});return Math.max.apply(Math,[0].concat(m(n)))}return-1},U=function(e,t){return function(e,t){if(t&&t.sharedNotebooks)for(var n=0;n<t.sharedNotebooks.length;n++){var r=t.sharedNotebooks[n];if(e&&r.recipientUserId===e.id&&r.privilege===f.SharedNotebookPrivilegeLevel.GROUP)return!0}return!1}(e,t)&&t&&t.businessNotebook&&t.businessNotebook.privilege?t.businessNotebook.privilege:-1},D=function(e,t,n,r){var o=function(e,t,n){if(t&&t.sharedNotebooks){var r=P(t.sharedNotebooks,e,n);if(0===r.length)return-1;var o=r.map(function(e){return e.privilege}).filter(function(e){return null!=e}).filter(function(e){return _.indexOf(e)>-1}),i=r.map(function(e){return e.privilege}).filter(function(e){return null!=e}).filter(function(e){return!(_.indexOf(e)>-1)&&e!==f.SharedNotebookPrivilegeLevel.GROUP});if(o.length>0)return Math.max.apply(Math,[0].concat(m(o)));if(i.length>0)return Math.max.apply(Math,[0].concat(m(i)))}return-1}(e,t,r),i=U(e,t);return t&&t.isTrueOwner&&(null==n||n===e.id)?ee(f.EntityType.NOTEBOOK,y):_.indexOf(i)>-1&&-1===k.indexOf(o)?i:_.indexOf(o)>-1?o:Math.max(o,i)},F=function(e){var t=e.view,n=e.edit,r=e.full;return t?100:n?200:r?y:g},V=function(e,t){var n=e&&null!=t&&function(e,t){return null!=e.memberships&&e.memberships.filter(function(e){return null!=e.common&&e.common.recipientId===t&&e.common.recipientType===p.RecipientType.USER})[0]||null}(e,t),r=e&&n&&null!=n.privilege&&n.privilege===R[y],o=e&&n&&null!=n.privilege&&n.privilege===R[200];return F({view:!r&&!o,edit:o&&!r,full:r})},M=function(e,t,n){var r=t?V(t,n):g,o=e&&null!=e.restrictions&&!e.restrictions.noCreateSharedNotebooks,i=e&&null!=e.restrictions&&!e.restrictions.noUpdateNotebook,a=F({view:!o&&!i,edit:i&&!o,full:o});return Math.max(r,a)},B=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null==e)return-1;if(t.sharedNotes&&e){var r=t.sharedNotes.filter(function(t){var r=t.recipientIdentity&&t.recipientIdentity.id,o=t.recipientIdentity&&t.recipientIdentity.userId,i=null!=r&&n[r]?n[r].userId:o,a=!1;return(e&&null!=e.identityId&&e.identityId===r||e&&null!=e.id&&e.id===i)&&(a=!0),a}).map(function(e){return e.privilege||0});return 0===r.length?-1:Math.max.apply(Math,m(r))}return-1},H=function(e,t){if(e&&e.sharedNotes){var n=e.sharedNotes.find(function(e){return null!=e.recipientIdentity&&(null!=t.identityId&&e.recipientIdentity.id===t.identityId||null!=t.userId&&e.recipientIdentity.userId===t.userId)});if(n&&null!=n.privilege)return O[n.privilege]}return g},W=function(e,t){var n=x(e,t);return w.includes(n)},G=function(e,t){var n=x(e,t);return N.includes(n)},K=function(e,t,n,r){if(n){var o=x(e,n);if(w.includes(o))return!0}var i=D(e,t,null,r);return _.includes(i)},Y=function(e,t,n,r){if(null==e)return!1;if(n&&G(e,n))return!0;var o=D(e,t,null,r);return k.includes(o)},z=function(e,t,n){return null!=e&&(!(!n||!W(e,n))||null!=t&&null!=t.restrictions&&!t.restrictions.noUpdateNotes)},Q=function(e,t,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(null==e)return!1;if(!t)return!1;if(!t.active)return!1;var a=Object(h.c)(t);if((null!=Object(h.b)(t)&&a!==h.a.EDITABLE_WELCOME_NOTE&&a!==h.a.CONTACT||Object(h.d)(t))&&!i)return!1;var u=!1,c=!1,s=!0,l=B(e,t,o);return n&&(u=z(e,n,r)),r&&(c=W(e,r)),t.restrictions&&(s=!t.restrictions.noUpdateContent),c||u||s&&E.includes(l)},q=function(e,t,n,r,o){if(Y(e,n,r,o))return!0;var i=B(e,t,o);return S.includes(i)},J=function(e,t){return G(e,t)},Z=function(e,t){return W(e,t)},X=function(e,t,n,r,o){if(!e)return!1;var i=t.restrictions||{canMoveToContainerRestrictions:{}},a=i.canMoveToContainerRestrictions&&i.canMoveToContainerRestrictions.canMoveToContainer===f.CanMoveToContainerStatus.INSUFFICIENT_CONTAINER_PRIVILEGE,u=Y(e,t,n,o);n&&(u=null!=i.canMoveToContainerRestrictions&&i.canMoveToContainerRestrictions.canMoveToContainer===f.CanMoveToContainerStatus.CAN_BE_MOVED);var c=r&&G(e,r);return!a&&u&&c},$=function(e,t,n){if(null==e||null==e.notebookGuid||null==t)return!1;var r=n[e.notebookGuid];return null!=r&&function(e,t){var n=!(e.restrictions&&null!=e.restrictions.noCanMoveNote&&e.restrictions.noCanMoveNote),r=!0;return t&&(r=!(t.restrictions&&null!=t.restrictions.noCanMoveNote&&t.restrictions.noCanMoveNote)),n&&r}(r,t)};function ee(e,t){switch(e){case f.EntityType.NOTE:return I[t];case f.EntityType.NOTEBOOK:return L[t];case f.EntityType.WORKSPACE:return R[t];default:return-1}}var te=function(e){return C[e]},ne=function(e){return O[e]},re=function(e){return Boolean(e&&null!=e.restrictions&&!e.restrictions.noCreateNotes)},oe=function(e){return Boolean(e&&null!=e.restrictions&&!e.restrictions.noUpdateNotes)},ie=function(e){return Boolean(null!=e.restrictions&&(e.isTrueOwner?e.restrictions&&!e.restrictions.noSetNotebookStack:e.restrictions&&!e.restrictions.noSetRecipientSettingsStack))},ae=function(e){return{canExpungeNotebook:null!=e.restrictions&&!e.restrictions.noExpungeNotebook,canMoveNotebook:Object(v.d)()&&null!=e.restrictions&&null!=e.restrictions.canMoveToContainerRestrictions&&e.restrictions.canMoveToContainerRestrictions.canMoveToContainer===f.CanMoveToContainerStatus.CAN_BE_MOVED,canRenameNotebook:null!=e.restrictions&&!e.restrictions.noRenameNotebook,canSetNotebookStack:ie(e),canShareNotebook:null!=e.restrictions&&!e.restrictions.noCreateSharedNotebooks}},ue=function(e){var t=e.note,n=e.notebook,r=e.space;return{canCopyNote:t&&t.restrictions&&!t.restrictions.noUpdateContent||function(e){return Boolean(e&&null!=e.restrictions&&!e.restrictions.noCreateNotes)}(n),canDeleteNote:oe(n),canMoveNote:function(e){return Boolean(e&&null!=e.restrictions&&!e.restrictions.noCanMoveNote)}(n),canRestoreNote:oe(n),canShareNote:t.restrictions&&!t.restrictions.noShare||function(e){return Boolean(e&&null!=e.restrictions&&!e.restrictions.noShareNotes)}(n)||function(e){return Boolean(e&&null!=e.restrictions&&!e.restrictions.noManageShares)}(r)}},ce=function(e){return!(!e||null==e.restrictions||e.restrictions.noManageShares)},se=function(e){var t=e.entity,n=e.space;return ce(n)||!(!t||null==t.restrictions||t.restrictions.noCreateSharedNotebooks)},le=function(e){var t=e.entity,n=e.notebook,r=e.space;return se({entity:n,space:r})||!(!t||null==t.restrictions||t.restrictions.noShare)||!(!n||null==n.restrictions||n.restrictions.noShareNotes)}},388:function(e,t,n){"use strict";var r={};n.d(r,"HVAGroup",function(){return p}),n.d(r,"HVA",function(){return v}),n.d(r,"initializeHVAs",function(){return h}),n.d(r,"initialState",function(){return m});var o=n(512),i=n(632),a=n(504),u=n(442),c=n(380);function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){l(e,t,n[t])})}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var d=Object(c.getPromotionsOfType)(c.Constants.HVA_GROUP),p=function e(t,n){f(this,e),this.id=void 0,this.childrenIds=void 0,this.promotion=void 0,this.isComplete=void 0,this.id=t,this.childrenIds=n,this.promotion=null,this.isComplete=!0},v=function e(t,n){f(this,e),this.id=void 0,this.parentId=void 0,this.promotion=void 0,this.isComplete=void 0,this.id=t,this.parentId=n,this.promotion=null,this.isComplete=!0},h=function(e){var t={groupHVAs:{},individualHVAs:{}};return Object.keys(e).reduce(function(t,n){var r=e[n],o=Object(c.getChildPromotions)(n);if(null==o)return t;var i=Object.keys(o).map(function(e){return o[e].promotionId});return t.groupHVAs=s({},t.groupHVAs,l({},r,new p(r,i))),i.forEach(function(e){t.individualHVAs=s({},t.individualHVAs,l({},e,new v(e,r)))}),t},t),t},m=h(d),b=n(808),g=n(547),y=n(475),E=n(471),S=n(962),_=n(623),k=n(58),w=n(472),N=n(367),O=n(115),I=n(640),T=n(372),L=n(61),A=n(22),R=n(622);function C(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}var P=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){C(i,r,o,a,u,"next",e)}function u(e){C(i,r,o,a,u,"throw",e)}a(void 0)})}}(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){return setTimeout(e,t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();var j=n(558),x=n(805),U=n(804),D=n(970),F="/client/embed/salesforce";t.a={BaseUrlUtil:k.a,ServiceUrlUtil:w.a,ShardLocator:N.a,analytics:o,createResourceMap:i,dateUtils:a,flowUtils:u,HVAUtils:r,getTransportOpts:O.a,handleServiceStatus:I.a,is500Status:I.b,isEmbedMode:D.a,isFullySynced:R.a,isLegacyBusinessMode:j.a,isLegacyPersonalMode:j.b,isOfflineError:x.a,isPlatformSupported:U.a,isSalesforceEmbedMode:function(){return"undefined"!=typeof window&&window.location.pathname.includes(F)},noteUtils:g,notebookUtils:b,promotionUtils:c,resourceUtils:y,setLegacyBusinessMode:j.c,setLegacyPersonalMode:j.d,sleep:P,taskUtils:E,timeWindowUtil:S,workspaceUtils:_,wrapBootstrapCall:function(e,t){var n=Object(A.default)("ion:action:bootstrap:".concat(e));if(n.log("bootstrapping ".concat(e,": isFullySynced:").concat(Object(R.a)().toString())),T.a.simulateLoad())return P(3e3*Math.random()+2e3);if(Object(R.a)())return Promise.resolve();var r=new Promise(function(t){var r=L.a.subscribe("app",function(o){"synced"===o.type&&!0===o.data&&(n.log("".concat(e," resolving from isFullySynced notification")),r(),t())})});return Promise.race([t(),r])}}},413:function(e,t){},422:function(e,t){},437:function(e,t){var n;!function(e){e[e.noPrivilege=-1]="noPrivilege"}(n||(n={}))},438:function(e,t){},439:function(e,t){},440:function(e,t,n){"use strict";(function(e,r,o){var i,a=n(22),u=Object(a.default)("boron:env");if(void 0!==e&&e.__boronEnv)i=e.__boronEnv;else if(r&&"renderer"===r.type){var c=n(3119).default;i=c,window.__boronEnv=c}else i=r&&"browser"===r.type?n(981).default:window&&window.__boronEnv||{platformName:"web",isPackaged:!1,isMac:!1,isWin:!1,isLinux:!1,isNode:!1};t.a=i,u.info("Using boronEnv: ".concat(JSON.stringify(o.exports)))}).call(this,n(11),n(34),n(644)(e))},441:function(e,t,n){"use strict";var r=n(378),o="B",i="P";t.a=function(e){if(null==e)return null;if(Object(r.e)())return"".concat(e);var t=Object(r.d)()?o:i;return"".concat(t,"_").concat(e)}},442:function(e,t,n){"use strict";n.r(t);var r=n(380),o=Object(r.getPromotionsOfType)(r.Constants.FLOW),i=[{id:o.FIRST_LAUNCH_EXISTING_USER,isFle:!0},{id:o.FIRST_LAUNCH_EXISTING_PERSONAL_USER,isFle:!0},{id:o.FIRST_LAUNCH_WITH_TRIAL_NEW_PERSONAL_USER,isFle:!0},{id:o.FIRST_LAUNCH_NEW_PERSONAL_USER,isFle:!0},{id:o.FIRST_LAUNCH_NEW_ADMIN_FIRST_MODAL_ION7237},{id:o.FIRST_LAUNCH_NEW_ADMIN_ION7237,isFle:!0},{id:o.FIRST_LAUNCH_NEW_ADMIN_FIRST_MODAL},{id:o.FIRST_LAUNCH_NEW_ADMIN,isFle:!0},{id:o.FIRST_LAUNCH_NEW_USER,isFle:!0},{id:o.SPACE_DIRECTORY_FLE},{id:o.INVITED_TO_SPACE},{id:o.CREATED_SPACE},{id:o.WAS_EMPTY_SPACE},{id:o.FREE_TRIAL_WITH_DOWNLOAD_EVERNOTE},{id:o.DOWNLOAD_EVERNOTE},{id:o.FREE_TRIAL}];function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"FlowIds",function(){return u}),n.d(t,"Flow",function(){return c}),n.d(t,"initialState",function(){return s});var u=o,c=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=void 0,this.isFle=void 0,this.completed=void 0,!Object.values(u).includes(t))throw new Error("invalid flow id provided");this.id=t,this.isFle=n,this.completed=r}return function(e,t,n){t&&a(e.prototype,t),n&&a(e,n)}(e,null,[{key:"initializeFlows",value:function(t){return t.reduce(function(t,n){var r=n.id,o=n.isFle,i=new e(r,void 0!==o&&o);return t[i.id]=i,t},{})}}]),e}(),s=c.initializeFlows(i)},463:function(e,t){},470:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(503),o=n.n(r),i=n(370);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.key=void 0,this.modifiers=void 0,this._keyDict=void 0,this._keyDict=t;var n="common";"common"in t||(n=e.isMac()?"mac":"windows");var r=t[n],o=r.key,i=r.modifiers;this.key=o.toLowerCase(),this.modifiers=i}return function(e,t,n){t&&a(e.prototype,t),n&&a(e,n)}(e,[{key:"asKeymasterString",value:function(){var e="";return this.modifiers&&(this.modifiers.control&&(e+="ctrl+"),this.modifiers.command&&(e+="command+"),this.modifiers.shift&&(e+="shift+"),this.modifiers.alt&&(e+="alt+")),"".concat(e).concat(this.key)}}],[{key:"getKeyIdentifier",value:function(e){return i.e[e.code]||e.key}},{key:"fromEvent",value:function(t){return new e(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e.isMac()?"mac":"windows",{key:e.getKeyIdentifier(t),modifiers:{command:t.metaKey,control:t.ctrlKey,shift:t.shiftKey,alt:t.altKey}}))}},{key:"isMac",value:function(){return!!o.a.os&&"OS X"===o.a.os.family}}]),e}()},471:function(e,t,n){"use strict";n.r(t),n.d(t,"makeTaskGuid",function(){return s}),n.d(t,"TASK_VIEW",function(){return r}),n.d(t,"TASK_GROUP",function(){return o}),n.d(t,"TASK_ACCESS",function(){return i}),n.d(t,"getTaskAccessType",function(){return l});var r,o,i,a=n(3002),u=n.n(a),c=n(378);function s(){return u.a.v4()}function l(){return Object(c.d)()?i.BUSINESS:i.PERSONAL}!function(e){e[e.MY_TASKS=0]="MY_TASKS",e[e.ALL_TASKS=1]="ALL_TASKS"}(r||(r={})),function(e){e[e.NONE=0]="NONE",e[e.DATE=1]="DATE"}(o||(o={})),function(e){e.BUSINESS="business",e.PERSONAL="private"}(i||(i={}))},472:function(e,t,n){"use strict";var r=n(58),o=n(440);t.a={fromLocator:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i="web"!==o.a.platformName?r.a.getBaseUrlWithPathPrefix():"".concat(window.location.origin).concat(r.a.getUserSlotUrlPrefix(),"/");return e.shard&&(i+="shard/".concat(e.shard,"/")),i+=e.personal||"web"!==o.a.platformName&&!n?t:"business/dispatch/".concat(t)},ensureUrlContainsUserSlot:function(e){var t="".concat(r.a.getUserSlotUrlPrefix(),"/shard/");return e.includes(t)?e:e.replace("/shard/",t)},preparePhotoUrl:function(e,t){var n=this.ensureUrlContainsUserSlot(e);return null!=n&&n.includes("?")?n+="&":n+="?",n+="size=".concat(t)},templatesEndpoint:function(){return"www.evernote.com"===new URL(r.a.getBaseUrl()).hostname?"https://templates.svc.www.evernote.com":"https://templates.svc.stage.evernote.com"},sanitizeAnalyticsUrl:function(){var e="",t=/^utm_/;window.location.href.slice(window.location.href.indexOf("?")+1).split("&").forEach(function(n){t.test(n)&&(e.length>0&&(e+="&"),e+=n)});var n=window.location.href.split("?")[0];return e.length>0?"".concat(n,"?").concat(e):n}}},475:function(e,t,n){"use strict";n.r(t),n.d(t,"hashify",function(){return d}),n.d(t,"addBinaryToENResource",function(){return p}),n.d(t,"isImageResource",function(){return v}),n.d(t,"getMimeType",function(){return h}),n.d(t,"fileAndBinaryToENResource",function(){return m}),n.d(t,"ceToENResource",function(){return b}),n.d(t,"thriftToCEResource",function(){return g}),n.d(t,"enToCEResource",function(){return y});var r=n(387),o=n(369),i=n(3077),a=n.n(i),u=n(440),c=n(472);function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){l(e,t,n[t])})}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=5242880;function d(e){for(var t="",n=0;n<e.length;n++){var r=e[n].toString(16);1===r.length&&(r="0".concat(r)),t+=r}return t}function p(e,t){var n=new Uint8Array(t),r=new Uint8Array(a.a.array(t)),o=d(r);return s({},e,{data:{body:n,bodyHash:r,size:t.byteLength},hash:o})}function v(e){return 0===e.indexOf("image/")}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.EDAM_MIME_TYPE_DEFAULT,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return v(e)&&t>f?r.EDAM_MIME_TYPE_DEFAULT:e||r.EDAM_MIME_TYPE_DEFAULT}function m(e,t){var n=new Uint8Array(t),i=new Uint8Array(a.a.array(t)),u=d(i);return s({},new o.Resource({mime:e.type||r.EDAM_MIME_TYPE_DEFAULT,attributes:new o.ResourceAttributes({fileName:e.name}),data:new o.Data({body:n,bodyHash:i,size:t.byteLength})}),{hash:u})}function b(e,t){return s({},new o.Resource({noteGuid:t,attributes:new o.ResourceAttributes({fileName:e.filename}),data:new o.Data({size:e.filesize}),mime:e.mime}),{url:e.url,hash:e.hash})}function g(e,t,n){var r=t.data,o=t.guid,i="web"===u.a.platformName||n.personal?"":"business/dispatch/",a=n.globalId?"".concat(i,"share/").concat(n.globalId,"/res/").concat(o||""):"".concat(i,"res/").concat(o||""),l=d(r&&r.bodyHash||""),f=c.a.fromLocator(n,a),p="web"!==u.a.platformName&&t.mime?"en-resource://".concat(e.guid,"+").concat(l,"+").concat(t.mime,"+"):"";return y(s({},t,{hash:l,url:"".concat(p).concat(f)}))}function y(e){var t=e.data?e.data.size:void 0;return{hash:e.hash,filesize:t,filename:e.attributes&&e.attributes.fileName||"",url:e.url,mime:h(e.mime||void 0,t||void 0)}}},476:function(e,t){},477:function(e,t){},504:function(e,t,n){"use strict";n.r(t),n.d(t,"Constants",function(){return r}),n.d(t,"secondsToMilli",function(){return o}),n.d(t,"minutesToMilli",function(){return i}),n.d(t,"hoursToMilli",function(){return a}),n.d(t,"daysToMilli",function(){return u});var r={SECONDS_IN_MILLIS:1e3,MINUTE_IN_MILLIS:6e4,HOUR_IN_MILLIS:36e5,DAY_IN_MILLIS:864e5};function o(e){return e*r.SECONDS_IN_MILLIS}function i(e){return e*r.MINUTE_IN_MILLIS}function a(e){return e*r.HOUR_IN_MILLIS}function u(e){return e*r.DAY_IN_MILLIS}},512:function(e,t,n){"use strict";n.r(t),n.d(t,"sendEvent",function(){return y}),n.d(t,"setSendEventFn",function(){return E}),n.d(t,"sendException",function(){return S}),n.d(t,"setSendExceptionFn",function(){return _}),n.d(t,"sendThriftErrorEvent",function(){return k}),n.d(t,"RPC_LOG_USAGE_BLACKLIST",function(){return w}),n.d(t,"logUsageSession",function(){return N});var r=n(56),o=n.n(r),i=n(371),a=n(22),u=n(61),c=n(383),s=n(59),l=n(377),f=n(962);function d(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function p(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){h(e,t,n[t])})}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=Object(a.default)("ion:utils:analytics"),b=function(){},g=function(){};function y(e){b(e)}function E(e){b=e}function S(e){g(e)}function _(e){g=e}function k(e,t){var n={category:"api",action:e},r=new Error(JSON.stringify(t));t instanceof c.EDAMNotFoundException?y(v({},n,{label:"EDAMNotFoundException"})):t instanceof c.EDAMUserException?y(v({},n,{label:"EDAMUserException"})):t instanceof c.EDAMSystemException?y(v({},n,{label:"EDAMSystemException"})):t instanceof s.Exceptions.TransportException?t.cause instanceof s.Exceptions.HTTPException&&y(v({},n,{category:"httperror",label:t.cause.statusCode})):y(v({},n,{label:"unknownException"})),S({message:r.message,callstack:r.stack,fatal:!1})}var w=["getSyncState","getSyncStateWithMetrics","getFilteredSyncChunk","getMessageSyncChunk"];function N(){return O.apply(this,arguments)}function O(){return(O=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){p(i,r,o,a,u,"next",e)}function u(e){p(i,r,o,a,u,"throw",e)}a(void 0)})}}(regeneratorRuntime.mark(function e(){var t,n,r,a,c,s,p,v,h,b;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="SESSION_TRACKING",e.next=3,u.a.call("user.actions.getactiveuser");case 3:if(null!=(n=e.sent)&&null!=n.id){e.next=6;break}return e.abrupt("return");case 6:return r=n.id,e.next=9,u.a.call("cupboard.get",{namespace:String(r),key:t});case 9:if(a=e.sent,c=new l.ClientUsageMetrics({sessions:1}),a){e.next=17;break}return m.log("No pre-existing sessionTrackingInfo so calling getSyncStateWithMetrics",c),e.next=15,i.a.getSyncStateWithMetrics(c);case 15:e.next=23;break;case 17:if(s=a.timeWindow,p=a.failedTimeWindows,v=a.timeStamp,p&&(c.sessions+=p.length),null!=s&&!Object(f.isSubsequentTimeWindow)(s,v)){e.next=23;break}return m.log("subsequentTimeWindow detected so calling getSyncStateWithMetrics",c),e.next=23,i.a.getSyncStateWithMetrics(c);case 23:return h=Object(f.getCurrentTimeWindow)(),b=Date.now(),e.next=27,u.a.call("cupboard.set",{namespace:String(r),key:t,value:{timeWindow:h,failedTimeWindows:a&&a.failedTimeWindows.length>0?o.a.uniq([].concat(d(a.failedTimeWindows),[h])):[],timeStamp:b}});case 27:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}},547:function(e,t,n){"use strict";n.r(t),n.d(t,"getNotesForNotebooks",function(){return l}),n.d(t,"isNoteExpungeableWithoutContainerNotebook",function(){return f}),n.d(t,"computeNoteSize",function(){return d}),n.d(t,"thriftNoteFromNote",function(){return p});var r=n(56),o=n.n(r),i=n(61),a=n(369);function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){c(e,t,n[t])})}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var l=function(e){return new Promise(function(t){i.a.call("note.actions.getall").then(function(n){var r=Object.keys(n).map(function(e){return n[e]}).filter(function(t){return e.includes(t.notebookGuid)});t(r)})})},f=function(e){return!(!e||e.restrictions)};function d(e){if(o.a.isEmpty(e)||null==e.contentLength)return 0;var t=o.a.sumBy(e.resources||[],function(e){return null!=e.data&&null!=e.data.size?e.data.size:0});return e.contentLength+t}function p(e){var t=new a.Note;return t.guid=e.guid,t.title=e.title,t.content=e.content,t.contentHash=e.contentHash,t.contentLength=e.contentLength,t.created=e.created,t.updated=e.updated,t.deleted=e.deleted,t.active=e.active,t.updateSequenceNum=e.updateSequenceNum,t.notebookGuid=e.notebookGuid,t.tagGuids=e.tagGuids&&s(e.tagGuids),t.resources=e.resources&&s(e.resources),t.attributes=e.attributes&&u({},e.attributes),t.tagNames=e.tagNames&&s(e.tagNames),t.sharedNotes=e.sharedNotes&&s(e.sharedNotes),t.restrictions=e.restrictions&&u({},e.restrictions),t.limits=e.limits&&u({},e.limits),t}},552:function(e,t){},553:function(e,t){},554:function(e,t){},555:function(e,t){},556:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(61),o=n(383),i=n(371),a=n(22),u=n(967);function c(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function s(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){c(i,r,o,a,u,"next",e)}function u(e){c(i,r,o,a,u,"throw",e)}a(void 0)})}}var l,f=Object(a.default)("ion:auth:business");function d(e,t){return p.apply(this,arguments)}function p(){return(p=s(regeneratorRuntime.mark(function e(t,n){var a,c,p,v,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c=function(e,t){n&&n(e,t)},a=function(e){t&&t(e)},e.prev=2,e.next=5,i.a.authenticateToBusiness();case 5:null!=(p=e.sent).user?a(p.user):c(new Error("Authentication result lacks necessary information")),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(2),v=l.UNKNOWN_ERROR,e.t0.errorCode===o.EDAMErrorCode.BUSINESS_SECURITY_LOGIN_REQUIRED?(h=r.a.register("business.sso.start",s(regeneratorRuntime.mark(function e(){var o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=function(){c(new Error("BusinessSecurityLoginFailure")),h()},o=function(){r.a.publish("business.sso.valid"),d(t,n),h()},Object(u.a)(o,i),e.abrupt("return",Promise.resolve());case 4:case"end":return e.stop()}},e,this)}))),r.a.publish("business.sso.invalid"),v=l.SSO_REQUIRED):e.t0.errorCode===o.EDAMErrorCode.PERMISSION_DENIED&&"Business.status"===e.t0.parameter?v=l.INACTIVE_BUSINESS:f.error("Unexpected failure calling authenticateToBusiness:",e.t0),c(e.t0,v);case 14:case"end":return e.stop()}},e,this,[[2,9]])}))).apply(this,arguments)}!function(e){e[e.UNKNOWN_ERROR=1]="UNKNOWN_ERROR",e[e.INACTIVE_BUSINESS=2]="INACTIVE_BUSINESS",e[e.SSO_REQUIRED=3]="SSO_REQUIRED"}(l||(l={})),t.b=d},558:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return u}),n.d(t,"d",function(){return c}),n.d(t,"c",function(){return s});var r,o="EN_LEGACY",i=n(440).a.isNode;function a(){return"P"===l()}function u(){return"B"===l()}function c(){f("P")}function s(){f("B")}function l(){if(i)return null;if(null==r){var e=window.localStorage;r=e.getItem(o)}return r}function f(e){i||window.localStorage.setItem(o,e)}},622:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=!1;function o(){return r}n(61).a.subscribe("app",function(e){"synced"===e.type&&(r=!0)})},623:function(e,t,n){"use strict";n.r(t),n.d(t,"getActiveUsersForSpaces",function(){return a}),n.d(t,"isSeen",function(){return u});var r=n(56),o=n.n(r),i=n(808);function a(e){return new Promise(function(t,n){var r={},o=[];Object.keys(e).forEach(function(t){o.push(new Promise(function(n){Object(i.getMostActiveUsers)(e[t]).then(function(e){r[t]=e,n()})}))}),Promise.all(o).then(function(){t(r)}).catch(n)})}var u=function(e){return o.a.defaultTo(o.a.get(e,"viewed"),!0)}},632:function(e,t,n){"use strict";n.r(t),n.d(t,"createResourceMapAsync",function(){return a}),n.d(t,"createResourceMap",function(){return c});var r=n(475),o=n(367);function i(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function a(e){return u.apply(this,arguments)}function u(){return(u=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){i(a,r,o,u,c,"next",e)}function c(e){i(a,r,o,u,c,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.getLocationForNote(t);case 2:return n=e.sent,e.abrupt("return",c(t,n));case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function c(e,t){return(e.resources||[]).reduce(function(n,o){var i=Object(r.thriftToCEResource)(e,o,t);return n[i.hash]=i,n},{})}},633:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"c",function(){return i}),n.d(t,"b",function(){return a}),n.d(t,"d",function(){return u});var r=n(387),o={UNKNOWN:0,SKITCH:1,CONTACT:2,WELCOME_NOTE:3,EDITABLE_WELCOME_NOTE:4,RTE:5,INK:6},i=function(e){if(e&&e.attributes&&e.attributes.contentClass){var t=e.attributes.contentClass;if(t.startsWith("evernote.contact."))return o.CONTACT;switch(t){case r.EDAM_CONTENT_CLASS_SKITCH:return o.SKITCH;case"evernote.realtime":return o.RTE;case"en-welcome-edit":return o.EDITABLE_WELCOME_NOTE;case"evernote.welcome":case"en-welcome":return o.WELCOME_NOTE;default:return o.UNKNOWN}}return o.UNKNOWN},a=function(e){return e.attributes&&e.attributes.contentClass?"evernote.realtime"===e.attributes.contentClass?null:e.attributes.contentClass:null},u=function(e){return null!=e.resources&&e.resources.some(function(e){return e.mime===r.EDAM_MIME_TYPE_INK})}},634:function(e,t){},635:function(e,t){},636:function(e,t){},640:function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"c",function(){return s});var r=n(3080),o=n.n(r),i=n(61),a=n(59),u=!1,c=function(e){var t=e.statusCode;return!!(t&&t>=500&&t<600)},s=function(e){var t=c({statusCode:e});u!==t&&(u=t,i.a.publish("app.service",u?"down":"up",{},!1))};t.a=function(e){if(e.cause instanceof a.Exceptions.HTTPException){var t=e.cause.statusCode;switch(t){case o.a.UNAUTHORIZED:i.a.publish("user.access.unauthorized");break;case o.a.UPGRADE_REQUIRED:i.a.publish("app.service","upgrade")}s(t)}}},804:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(372),o=n(503),i=n.n(o),a={CHROME:{name:"Chrome",majorVersion:null},SAFARI:{name:"Safari",majorVersion:11},OPERA:{name:"Opera",majorVersion:null},ELECTRON:{name:"Electron",majorVersion:null}};function u(){return r.a.isUnsupportedBrowserEnabled()||function(e){try{var t=i.a.name,n=i.a.version;if(null==t||null==n)return!1;var r=Object.values(e).find(function(e){return e.name===t});if(null==r)return!1;var o=r.majorVersion;if(null==o)return!0;var a=parseInt(n.split(".")[0],10);return"number"==typeof a&&a>=o}catch(e){return!1}}(a)}},805:function(e,t,n){"use strict";t.a=function(e){return null!=e&&e instanceof ProgressEvent&&"error"===e.type}},808:function(e,t,n){"use strict";n.r(t),n.d(t,"getMostActiveUsers",function(){return a});var r=n(56),o=n.n(r),i=n(547),a=function(e){return new Promise(function(t){Object(i.getNotesForNotebooks)(e).then(function(e){var n=o.a.sortBy(e,["updated"]).reduce(function(e,t){var n=t.attributes?t.attributes.lastEditorId:null;return null!=n&&(e[n]||(e[n]=0),e[n]+=1),e},{}),r=Object.keys(n).map(function(e){var t=Number(e);return{userId:t,count:n[t]}});r.sort(function(e,t){return e.count<t.count?1:e.count>t.count?-1:0});var i=r.map(function(e){return e.userId});t(i)})})}},962:function(e,t,n){"use strict";n.r(t),n.d(t,"getCurrentTimeWindow",function(){return c}),n.d(t,"isSubsequentTimeWindow",function(){return s});var r=n(22),o=n(362),i=n.n(o),a=Object(r.default)("ion:utils:timeWindowUtil"),u=9e5;function c(e){var t=e||Date.now(),n=i()(t).startOf("day").valueOf();return Math.floor((t-n)/u)}function s(e,t){if(null==e)return a.error("Supply a time window. A time window is one of a day's 96,\n    15 minutes segments"),null;var n=i()(t),r=i()(),o=n.year()!==r.year(),u=n.day()!==r.day(),s=c()!==e;return o||u||s}},963:function(e,t){},964:function(e,t){},965:function(e,t){},966:function(e,t){},967:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(60);function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,o=Object(r.c)(n);n.webclientBusinessSecurityLoginAuthSuccess=function(){o&&o.close(),e()},n.webclientBusinessSecurityLoginAuthFailure=function(){o&&o.close(),t()}}},970:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r="/client/embed";function o(){return"undefined"!=typeof window&&null!=window.location&&window.location.pathname.includes(r)}},979:function(e,t,n){"use strict";n.r(t),function(e){var r=n(3117),o=n(3116),i=n.n(o),a=n(396),u=n.n(a),c=n(356);function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){l(e,t,n[t])})}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){var t=i.a.readFileSync(e,"utf8");return t?JSON.parse(t):{}}t.default=function(){if(!c.app)return c.remote?c.remote.getGlobal("__boronConfig"):f(u.a.resolve("boron/static/boron-config-template.json"));var t=u.a.join(c.app.getPath("userData"),"config.json");i.a.ensureFileSync(t);var n=f(t);n&&n.general&&n.general.defaultServiceHost&&(n.general.defaultServiceHost=Object(r.a)(n.general.defaultServiceHost));var o=f(u.a.resolve(__static,"boron-config-template.json")),a={dev:s({},o.dev,n.dev),general:s({},o.general,n.general),qa:s({},o.qa,n.qa)};return i.a.writeFileSync(t,JSON.stringify(a,null,2)),e.__boronConfig=a,a}()}.call(this,n(11))},980:function(e,t,n){"use strict";(function(e,r){var o,i=(0,n(22).default)("boron:config");if(e&&"renderer"===e.type){var a=n(979).default;o=a,window.__boronConfig=a}else o=e&&"browser"===e.type?n(979).default:window.__boronConfig;i.info("Using boronConfig: ".concat(JSON.stringify(r.exports))),t.a=o}).call(this,n(34),n(644)(e))},981:function(e,t,n){"use strict";n.r(t),function(e){var r=n(3118),o=n.n(r);var i=function(){switch(e.platform){case"darwin":return"mac";case"win32":return"win";case"linux":return"linux";default:throw new Error("Unsupported platform: ".concat(e.platform))}}(),a={platformName:i,isPackaged:!o.a,isMac:"mac"===i,isWin:"win"===i,isLinux:"linux"===i,isNode:!0};t.default=a}.call(this,n(34))}}]);